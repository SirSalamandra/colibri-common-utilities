/*! For license information please see websocket.bundle.js.LICENSE.txt */
(()=>{var e={120:()=>{!function(e,t){var n=function(){var r,i={SESSION_START:1,RESOURCE_SUBSCRIBE:2,KEEP_ALIVE:3,BATCH_SUBSCRIBE:5,PACKET_RECEIVE:7,EVENT_RECEIVE:8,SET_RESOURCE_ALIAS:10,RESOURCE_PUBLISH:14,RESOURCE_UNSUBSCRIBE:15,QUEUE_COMMIT:16,QUEUE_ROLLBACK:17,TX_PUBLISH:20,TX_IS_COMMITTED:24,CLIENT_CLOSE:30},s={START:1,STOP:2,DISCONNECT:3,RECONNECT:4,ERROR:5,DATA:6,DRIVER_CHANGE:7,SUBSCRIBE:8,UNSUBSCRIBE:9,COMMIT:10,ROLLBACK:11,PUBLISH:13},o="NOTSTARTED",a="CONNECTING",u="CONNECTED",c="RECONNECTING",g="STOPPED",l="_Nirvana_Driver_DOM_Objects_Container",h={},d=null,p=function(){var r=9,o=!1,a=function(){var t,n=[],i=!1,s=function(e){};function o(e,o){if(r<=e){var a=Array.prototype.slice.call(arguments);a.unshift(new Date);var u=a.join(" ");i&&t&&!t.closed&&t.document.writeln(u+"<br/>"),n.length>1e4&&n.shift(),n.push(u),s(u)}}function a(r){r||(r=e.event),68==r.keyCode&&r.ctrlKey&&r.altKey&&function(){if(!i||t&&t.closed){(t=e.open("","Console","width=600,height=300,scrollbars=yes,resizable")).document.open(),t.document.writeln("<style> { font-size: 10px; font-family: verdana, lucida sans, courier new, courier, sans-serif ; }</style>"),t.document.writeln("<b>User Agent: "+navigator.userAgent+"</b><br/>");for(var r=0;r<n.length;r++)t.document.writeln(n[r]+"<br/>");i=!0}else t.focus()}()}try{e.addEventListener?e.addEventListener("keydown",a,!1):document.attachEvent?document.attachEvent("onkeydown",a):document.addEventListener("keydown",a,!0)}catch(e){}return{setLogger:function(e){s=e},log:o,logException:function(e,t){o(e,"EXCEPTION: "+t.name+" - "+t.message)}}}(),u=function(){var e=0,t=0,n={};function r(e){try{n[e]&&delete n[e]}catch(e){}}return function t(){e+=500,function(){for(var t in n)if(n.hasOwnProperty(t)){var i=n[t];e>=i.t&&(i.f(),r(t))}}(),setTimeout(t,500)}(),{schedule:function(r,i){var s=t++;return n[s]={t:e+i,f:r},s},cancel:r}}();function c(e,t,n,r,i){this.session=e,this.proxyWin=null,this.initialized=!1,this.initCallback=r,this.proxyRealm=n,this.proxyID=t+"_"+(new Date).getTime(),this.proxyURL=n+e.getConfig().crossDomainPath+"/crossDomainProxy.html",this.proxyIFrame=v(this.proxyURL+"?proxyID="+this.proxyID+"&sessionID="+p.generateUniqueID()+"&validOrigins="+encodeURIComponent(e.getConfig().currentDomain+","+e.getConfig().realms.join(",")),i),this.readyState=0,this.responseText="",this.status=0,m.collection[this.proxyID]=this}function g(e,t){if(t)for(;e.hasChildNodes();)e.removeChild(e.lastChild);else for(;e.hasChildNodes();){var n=e.removeChild(e.lastChild);for(var r in n)delete n[r]}}c.prototype.proxyRequest=function(e,t){null===this.proxyWin&&(this.proxyWin=this.proxyIFrame.contentWindow);for(var n=[this.proxyID,e],r=0;r<t.length;r++)n.push(t[r]);this.proxyWin.postMessage(JSON.stringify(n),this.proxyRealm)},c.prototype.open=function(e,t,n){this.proxyRequest("open",arguments)},c.prototype.send=function(){this.proxyRequest("send",arguments)},c.prototype.setRequestHeader=function(){this.proxyRequest("setRequestHeader",arguments)},c.prototype.abort=function(){this.proxyRequest("abort",arguments)},c.prototype.destroy=function(){this.proxyIFrame.src=this.proxyURL+"?expired="+(new Date).getTime(),delete m.collection[this.proxyID],m.collection[this.proxyID]=null,this.proxyIFrame=null,this.responseText=null},e.addEventListener("message",(function(t){if(function(e){var t=JSON.parse(e);if(t.length>0){var n=t[0];if(-1!=n.indexOf("EVENTSOURCE_STREAMING_POSTMESSAGE")||-1!=n.indexOf("XHR_LONGPOLL_POSTMESSAGE")||-1!=n.indexOf("IFRAME_STREAMING_POSTMESSAGE"))return!0}return!1}(t.data))if(function(e){for(var t in e=e.toUpperCase(),m.collection)if(m.collection.hasOwnProperty(t)&&m.collection[t]&&b(m.collection[t].proxyRealm).toUpperCase()==e)return!0;return!1}(b(t.origin))){var r=JSON.parse(t.data),i=r[0],s=r[2],o=m.collection[i];"init"==s&&o&&(o.initialized=!0,o.initCallback("initialized")),"change"==s&&o.onreadystatechange&&(o.responseText=r[3],o.readyState=r[4],o.status=r[5],o.onreadystatechange()),"iframe"==s&&f.c(JSON.parse(r[3])),"iFrame_close"==s&&f.onError(s),"sse"==s&&f.c(JSON.parse(r[3]))}else h[e.Nirvana].notifyListeners(n.Observe.ERROR,null,new R("CrossDomainProxy","PostMessage Event Origin "+t.origin+" does not equal any proxied realm origin "+function(){var e=[];for(var t in m.collection)m.collection.hasOwnProperty(t)&&m.collection[t]&&e.push(b(m.collection[t].proxyRealm));return e.join(",")}()));else p.isLoggingEnabled()&&p.Logger.log(0,"Window received message event that is not intended as cross domain proxy communication.")}),!1);var d,m={counter:0,collection:{}};function v(e,t){var n=document.createElement("iframe");n.id="iframe"+(new Date).getTime(),n.src=e,n.style.display="none",n.style.position="absolute",n.onerror=t;try{document.getElementById(l).appendChild(n)}catch(e){t("IFrame Exception: "+e.message)}return n}var _,S=function(e,t){var n,r,i,s,o,a,u,c="",g=0,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=function(e){var t="";return e<128?t+=String.fromCharCode(e):e>127&&e<2048?(t+=String.fromCharCode(e>>6|192),t+=String.fromCharCode(63&e|128)):(t+=String.fromCharCode(e>>12|224),t+=String.fromCharCode(e>>6&63|128),t+=String.fromCharCode(63&e|128)),t};for(t||(e=function(e){var t="";e=e.replace(/\r\n/g,"\n");for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);t+=h(r)}return t}(e));g<e.length;)t?(n=e[g++],r=e[g++],i=e[g++]):(n=e.charCodeAt(g++),r=e.charCodeAt(g++),i=e.charCodeAt(g++)),s=n>>2,o=(3&n)<<4|r>>4,a=(15&r)<<2|i>>6,u=63&i,g-2===e.length||isNaN(r)?a=u=64:(g-1===e.length||isNaN(i))&&(u=64),c=c+l.charAt(s)+l.charAt(o)+l.charAt(a)+l.charAt(u);return c};d="undefined"==typeof btoa?S:function(e,t){return t?S(e,t):btoa(e)};var y=function(e,t){var n,r,i,s,o,a,u="",c=0,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");for(var l=[];c<e.length;)n=g.indexOf(e.charAt(c++))<<2|(s=g.indexOf(e.charAt(c++)))>>4,r=(15&s)<<4|(o=g.indexOf(e.charAt(c++)))>>2,i=(3&o)<<6|(a=g.indexOf(e.charAt(c++))),u+=String.fromCharCode(n),t&&l.push(n),64!=o&&(u+=String.fromCharCode(r),t&&l.push(r)),64!=a&&(u+=String.fromCharCode(i),t&&l.push(i));return t?l:function(e){for(var t="",n=0,r=0,i=0,s=0;n<e.length;)(s=e.charCodeAt(n))<128?(t+=String.fromCharCode(s),n++):s>191&&s<224?(r=e.charCodeAt(n+1),t+=String.fromCharCode((31&s)<<6|63&r),n+=2):(r=e.charCodeAt(n+1),i=e.charCodeAt(n+2),t+=String.fromCharCode((15&s)<<12|(63&r)<<6|63&i),n+=3);return t}(u)};_="undefined"==typeof atob?y:function(e,t){return t?y(e,t):atob(e)};var T=0;function b(e){return(e=function(e){return e.match(/https?:\/\/[^\/]+/)?e.match(/https?:\/\/[^\/]+/)[0]:e}(e)).match(/:[0-9]+$/)||(e.match(/^https:/)?e+=":443":e+=":80"),e}function A(e){for(var t=""+e;t.length<4;)t="0"+t;return t}return{Logger:a,Scheduler:u,isLoggingEnabled:function(){return o},setDebugLevel:function(e){o=(r=e)<9},HTTPRequestFactory:function(){var e=[],r=function(e){return f.getNirvanaCookie()!==t?"&Connection-Type=JR&"+f.getNirvanaCookie()+"&R="+e.requestID:"&R="+e.requestID},s=function(e){var t="";return e.hasTag()&&(t=t+"&T="+p.base64Encode(e.getTag())),e.hasData()&&(t=t+"&D="+e.getData(n.BYTE_ARRAY_AS_BASE64_STRING)),e.hasDictionary()&&(t=t+"&J="+o(e.getDictionary())),t+"&L="+e.getTTL()+a(e.getEventAttributes())},o=function(e){for(var t=e.getKeys(),r=t.length,i="",s=0;s<r;s++){s>0&&(i+=",");var a=t[s],u=e.getType(a);if(i+=encodeURIComponent(a)+","+u,u===D.ARRAY){u=e.getArrayType(a);var c=e.get(a,n.LongType.LONG_AS_DECIMAL_STRING);if(u===D.STRING||u===D.CHARACTER){for(var g=[],l=0;l<c.length;l++)g[l]=encodeURIComponent(c[l]);c=g}i+=","+u+","+c.length+","+c.join(",")}else u===D.DICTIONARY?i+=","+o(e.get(a)):u===D.STRING||u===D.CHARACTER?i+=","+encodeURIComponent(e.get(a)):i+=","+e.get(a,n.LongType.LONG_AS_DECIMAL_STRING)}return i},a=function(e){for(var t=0,n=[],r=w.HEADER_KEYS,i=r.length,s=0;s<i;s++){var o=e.getAttribute(r[s]);(o||0===o)&&(t+=1<<s,n.push(encodeURIComponent(o)))}if(e.getMessageType()>-1&&e.getMessageType()<7)for(var a=w.JMS_HEADER_KEYS,u=a.length,c=0;c<u;c++){var g=e.getAttribute(a[c]);(g||0===g)&&(t+=1<<i+c,n.push(encodeURIComponent(g)))}return t>0?"&K="+t+"&H="+n.join(","):""};return e[i.SESSION_START]=function(e){var t=e.session;return["F="+i.SESSION_START+"&Connection-Type=JC&Y=10&V="+navigator.appName.replace(" ","-")+"&P="+f.Drivers.WireProtocol[f.getCurrentDriver()]+"&W="+n.BUILD_NUMBER.replace(" ","-")+"&X="+n.BUILD_DATE.replace(" ","-")+"&Z="+navigator.platform.toString().replace(" ","_")+"&S="+encodeURIComponent(t.getUsername())+"&A="+encodeURIComponent(t.getConfig().applicationName)+"&G="+(t.getConfig().serverLogging?"T":"F")+"&D="+(t.isDataStreamEnabled()?"T":"F")+"&B="+t.getDataStreamID()+"&R="+e.requestID+"&1Date="+(new Date).getTime(),""]},e[i.CLIENT_CLOSE]=function(e){return["F="+i.CLIENT_CLOSE+r(e),""]},e[i.KEEP_ALIVE]=function(e){return["F="+i.KEEP_ALIVE+r(e),""]},e[i.BATCH_SUBSCRIBE]=function(e){for(var t="",s=e.resources,o=s.length,a=0;a<o;a++){var u=s[a],c=u.getResourceType();a>0&&(t+=","),t+=u.getName(),c===n.CHANNEL_RESOURCE?(t+=","+(u.getCurrentEID()>=0?u.getCurrentEID()+1:u.getStartEID()),t+=","+encodeURIComponent(u.getFilter()),t+=",F"):c===n.QUEUE_RESOURCE?(t+=",0",t+=","+encodeURIComponent(u.getFilter()),t+=",T"):c===n.TRANSACTIONAL_QUEUE_RESOURCE?(t+=","+u.getWindowSize(),t+=","+encodeURIComponent(u.getFilter()),t+=",T"):(t+=",0",t+=","+encodeURIComponent(u.getFilter()),t+=",F")}return["F="+i.BATCH_SUBSCRIBE+r(e),"E="+o+"&N="+t]},e[i.RESOURCE_SUBSCRIBE]=function(t){return t.resources=[t.resource],e[i.BATCH_SUBSCRIBE](t)},e[i.RESOURCE_PUBLISH]=function(e){var t=e.resource,n=e.event;return["F="+i.RESOURCE_PUBLISH+r(e),"N="+t.getName()+s(n)]},e[i.RESOURCE_UNSUBSCRIBE]=function(e){var t=e.resource,s=t.getResourceType(),o=["F="+i.RESOURCE_UNSUBSCRIBE+r(e),"N="+t.getName()];return s!==n.QUEUE_RESOURCE&&s!==n.TRANSACTIONAL_QUEUE_RESOURCE||(o[1]=o[1]+"&Q=T"),o},e[i.QUEUE_COMMIT]=function(e){var t=e.resource,n=e.event;return["F="+i.QUEUE_COMMIT+r(e),"N="+t.getName()+"&E="+n.getEID()]},e[i.QUEUE_ROLLBACK]=function(e){var t=e.resource,n=e.event;return["F="+i.QUEUE_ROLLBACK+r(e),"N="+t.getName()+"&E="+n.getEID()]},e[i.TX_PUBLISH]=function(e){var t=e.resource,n=e.transaction,o=e.event;return["F="+i.TX_PUBLISH+r(e),"N="+t.getName()+"&X="+n.getTxID()+s(o)]},e[i.TX_IS_COMMITTED]=function(e){var t=e.transaction;return["F="+i.TX_IS_COMMITTED+r(e),"X="+t.getTxID()]},{buildRequest:function(t){return p.isLoggingEnabled()&&p.Logger.log(3,"[HTTP Request Factory] Building Request from Command "+U(t.requestType)),e[t.requestType](t)}}},HTTPResponseFactory:function(e){var t=[],r=!1,o=function(e){for(var t in p.isLoggingEnabled()&&p.Logger.log(3,"[HTTP Response Factory] Building Event Dictionary ",e),e)if(e.hasOwnProperty(t)){var n=e[t];if(n[0]===D.STRING||n[0]===D.CHARACTER)n[1]=decodeURIComponent(n[1]);else if(n[0]===D.DICTIONARY)n[1]=o(n[1]);else if(n[0]===D.ARRAY)if(n[1]===D.STRING||n[1]===D.CHARACTER)for(var r=n[2],i=r.length,s=0;s<i;s++)r[s]=decodeURIComponent(r[s]);else if(n[1]===D.DICTIONARY)for(var a=n[2],u=a.length,c=0;c<u;c++)a[c]=o(a[c])}return new D(e,!0)};return t[i.SESSION_START]=function(t,n){p.isLoggingEnabled()&&p.Logger.log(6,"[HTTP Response Factory] Received Session Start Response for Command "+n.requestType,t,n),t[1]?(e.setSessionID(t[2]),e.setDataStreamID(t[3]),f.onConnect(t[4]),E.setReady(!0),n.reconnect?e.notifyListeners(s.RECONNECT,e,t[3]):e.notifyListeners(s.START,e,t[3])):(p.isLoggingEnabled()&&p.Logger.log(6,"[HTTP Response Factory] Session Connection Error: "+t[2]),e.notifyListeners(s.ERROR,e,{name:"SessionConnectException",message:t[2]}))},t[i.BATCH_SUBSCRIBE]=function(e,t){p.isLoggingEnabled()&&p.Logger.log(3,"[HTTP Response Factory] Received Batch Subscribe Callback for Command "+t.requestType,e,t);for(var r=t.resources,i=e.slice(1),s=t.resubscribe,o=r.length,a=0;a<o;a++){var u=r[a],c=i[a],g=c[1];if(u.setSubscribed(g),g)u.setAlias(c[2]),s||u.notifyListeners(n.Observe.SUBSCRIBE,u,"OK");else{var l,h=c[2];h&&(l=-1!==h.indexOf("SECURITY")?new C(h):-1!==h.indexOf("Channel Not Found")?new L(u.getName(),h):new I(h)),l||(l=new I("Unknown Error Occurred")),u.notifyListeners(n.Observe.ERROR,u,l)}}},t[i.KEEP_ALIVE]=function(e,t){p.isLoggingEnabled()&&p.Logger.log(3,"[HTTP Response Factory] Processing KA Response "+e.toString())},t[i.RESOURCE_PUBLISH]=function(e,t){p.isLoggingEnabled()&&p.Logger.log(3,"[HTTP Response Factory] Received Publish Callback for Command "+t.requestType,e,t);var n=t.resource,r=e[1];if(r)n.notifyListeners(s.PUBLISH,n,r);else{var i,o=e[2];i=o&&-1!==o.indexOf("SECURITY")?new C(o):new I(o),n.notifyListeners(s.ERROR,n,i)}},t[i.RESOURCE_UNSUBSCRIBE]=function(e,t){p.isLoggingEnabled()&&p.Logger.log(3,"[HTTP Response Factory] Received Resource unsubscribe Callback for Command "+t.requestType);var n=t.resource;n.setSubscribed(!1),n.notifyListeners(s.UNSUBSCRIBE,n,"OK")},t[i.PACKET_RECEIVE]=function(t){e.getLongPollRequestID()<t[1]?e.setLongPollRequestID(t[1]):f.onError("Data received out of order, reset required. Expected packet "+(e.getLongPollRequestID()+1)+" but received "+t[1])},t[i.EVENT_RECEIVE]=function(t){p.isLoggingEnabled()&&p.Logger.log(3,"[HTTP Response Factory] Received Event",t);var r,i,a,u=t[1];if("1"===u.dg)r=e,i=-1,a=e.getGroupName(u.CNAME);else{if(!(r=e.getResourceByAlias(u.CNAME)))return void(p.isLoggingEnabled()&&p.Logger.log(3,"[HTTP Response Factory] Event was for non-existent resource: "+u.CNAME));i=r.getResourceType(),a=r.getName()}var c=function(t,n,r){var i;t.Dictionary&&(i=o(t.Dictionary));var s,a=new w(t.h);return t.Tag&&(s=p.base64Decode(t.Tag)),new M(e,t.EID,n,r,a,t.Data,s,i)}(u,r,a);r&&(i===n.CHANNEL_RESOURCE&&r.setCurrentEID(c.getEID()),r.notifyListeners(s.DATA,c))},t[i.SET_RESOURCE_ALIAS]=function(t){var n=t[1],r=t[2],i=t[3];"3"==n?e.setGroupAlias(r,i):e.setResourceAlias(r,i)},t[i.QUEUE_COMMIT]=function(e,t){p.isLoggingEnabled()&&p.Logger.log(3,"[HTTP Response Factory] Received Queue Commit Response",e,t);var n=t.resource;n.notifyListeners(s.COMMIT,n,e[1])},t[i.QUEUE_ROLLBACK]=function(e,t){p.isLoggingEnabled()&&p.Logger.log(3,"[HTTP Response Factory] Received Queue Rollback Response",e,t);var n=t.resource;n.notifyListeners(s.ROLLBACK,n,e[1])},t[i.TX_PUBLISH]=function(e,t){var n=e[1],r=t.transaction;n?(r.notifyListeners(s.COMMIT,r,!0),r.setIsCommitted(!0)):(r.notifyListeners(s.COMMIT,r,!1),r.notifyListeners(s.ERROR,r,e[2]),r.setIsCommitted(!1))},t[i.TX_IS_COMMITTED]=function(e,t){var n=t.transaction;n.notifyListeners(s.COMMIT,n,e[1]),n.setIsCommitted(!0)},t[i.CLIENT_CLOSE]=function(t,n){n.clientRequest?(p.isLoggingEnabled()&&p.Logger.log(6,"[HTTP Response Factory] Received Client Close Session Response "+U(t[0])+" for command "+U(n)),f.stop(),e.notifyListeners(s.STOP,e,!0)):(p.isLoggingEnabled()&&p.Logger.log(4,"[HTTP Response Factory] Received Internal Close Session Response "+U(t[0])+" for command "+U(n)),f.onError("Internal close session processed for driver reset"))},{dispatchResponse:function(e){var n=e.d;p.isLoggingEnabled()&&p.Logger.log(3,"[HTTP Response Factory] Dispatching response "+U(n[0]));var s=n[0];if(s==i.SESSION_START&&(r=!1),r||s===i.SESSION_START||(r=!0,f.setPreferredDriver()),s===i.EVENT_RECEIVE||s===i.PACKET_RECEIVE||s===i.SET_RESOURCE_ALIAS)t[s](n);else{var o=E.dequeueCommand(e.r);if(null===o&&s!==i.KEEP_ALIVE)return p.isLoggingEnabled()&&p.Logger.log(6,"[HTTP Response Factory] Command is null"),!1;if(t[s](n,o),null!==o&&s!==i.SESSION_START)return!0}return!1}}},createIFrame:v,createForeverIFrame:function(t,n,r){var i;if(document.createElement){var s=document.getElementById("NVLSubFrame");if(s)s.setAttribute("src",t),i=s;else{p.isLoggingEnabled()&&p.Logger.log(2,"Iframe does not exist, so creating new one");var o='<iframe id="NVLSubFrame"';if(o+=" onload=\"window.parent.errorCB('iframe_connection_closed',",o+=!!e.ActiveXObject,o+=')"',o+=' src="'+t+'" style="',o+="border:1px;",o+="width:0px;",o+="height:0px;",o+='"></iframe>',e.ActiveXObject){this.htmlfile=new ActiveXObject("htmlfile"),this.htmlfile.open(),this.htmlfile.write("<html></html>"),this.htmlfile.close(),this.htmlfile.parentWindow.onMessage=n,this.htmlfile.parentWindow.errorCB=r;var a=this.htmlfile.createElement("div");this.htmlfile.body.appendChild(a),a.innerHTML+=o,i=this.htmlfile}else document.getElementById(l).innerHTML+=o,(i={}).document={},i.document.location={},i.document.location.iframe=document.getElementById("NVLSubFrame"),i.document.location.replace=function(e){this.iframe.src=e}}}return i},initXMLHTTP:function(t){p.isLoggingEnabled()&&p.Logger.log(2,"[initXMLHTTP] for "+t);var n=!1;if(void 0!==e.XMLHttpRequest&&e.XMLHttpRequest)try{return n=new XMLHttpRequest,p.isLoggingEnabled()&&p.Logger.log(2,"initXMLHTTP : Constructed XMLHttpRequest for ["+t+"]"),n}catch(e){p.isLoggingEnabled()&&p.Logger.log(2,"initXMLHTTP : Error constructing XMLHttpRequest for ["+t+"]. error="+e.message),n=!1}else if(void 0!==e.ActiveXObject&&e.ActiveXObject)for(var r=["MSXML2.XMLHttp","Microsoft.XMLHttp","MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","MSXML2.XMLHttp.3.0"],i=0;i<r.length;i++)try{return n=new ActiveXObject(r[i]),p.isLoggingEnabled()&&p.Logger.log(2,"initXMLHTTP : Constructed ActiveXObject XMLHttpRequest using ["+r[i]+"] for ["+t+"]"),n}catch(e){p.isLoggingEnabled()&&p.Logger.log(2,"initXMLHTTP : Error constructing ActiveXObject XMLHttpRequest :"+r[i]+" for ["+t+"]. error="+e.message),n=!1}else p.isLoggingEnabled()&&p.Logger.log(2,"initXMLHTTP : Failed to construct xmlHTTP object for ["+t+"]"),n=!1;return n},base64Encode:d,base64Decode:_,getCookie:function(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0]==e)return decodeURIComponent(r[1])}return null},setCookie:function(e,t){document.cookie=e+"="+encodeURIComponent(t)+"; expires="+new Date((new Date).getTime()+31536e6)+"; "},getCanonicalResourceName:function(e){return(e=e.replace(/[^A-Za-z0-9\/_\-#]+/gi,"")).match(/^[^\/].*?\//)&&(e="/"+e),e},getCanonicalOrigin:b,getUrlProtocol:function(e){return e.match(/^([a-z]+):\/\//)[0]},generateTransactionID:function(){return T++},generateUniqueID:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},CrossDomainProxy:c,FormSubmitter:function(){this.id=p.generateUniqueID();var e="container"+this.id,t=document.createElement("div");t.style.display="none",t.setAttribute("id",e),document.getElementById(l).appendChild(t);var n="Microsoft Internet Explorer"==navigator.appName;p.isLoggingEnabled()&&p.Logger.log(2,"[FormSubmitter] Creating new FormSubmitter: "+this.id),this.send=function(e,r){p.isLoggingEnabled()&&p.Logger.log(2,"[FormSubmitter] Sending "+e+"?"+r[0]+"&"+r[1]),g(t,n);var i,s=document.createElement("form");s.style.display="none",s.style.position="absolute",s.method="POST",s.enctype="application/x-www-form-urlencoded",s.acceptCharset="UTF-8",t.appendChild(s);try{i=document.createElement('<iframe name="'+this.id+'">')}catch(e){(i=document.createElement("iframe")).name=this.id}i.id=this.id,i.style.display="none",s.appendChild(i),s.target=this.id,s.action=e+"?"+r[0];try{for(var o=r[1].split("&"),a=0;a<o.length;a++){var u=o[a].indexOf("=");if(u>-1){var c=o[a].substring(0,u),l=o[a].substring(u+1,o[a].length),h=document.createElement("textarea");h.name=c,h.value=l,s.appendChild(h)}}}catch(e){p.isLoggingEnabled()&&p.Logger.log(2,"[FormSubmitter] Exception: "+e.message)}s.submit()},this.destroy=function(){g(t,n),document.getElementById(l).removeChild(t)}},JSONP_Poller:function(e){this.id=p.generateUniqueID(),p.isLoggingEnabled()&&p.Logger.log(2,"[JSONP_Poller] Creating new longpoller: "+this.id);var t="container"+this.id,n=0,r=document.createElement("div");r.style.display="none",r.setAttribute("id",t);var i=document.createElement("link");i.setAttribute("rel","shortcut icon"),i.setAttribute("href","about:blank"),r.appendChild(i),document.getElementById(l).appendChild(r);var s=!1,o="Microsoft Internet Explorer"==navigator.appName;this.send=function(t,i){var a=t+"?"+i[0]+"&"+i[1];p.isLoggingEnabled()&&p.Logger.log(2,"[JSONP_Poller] Sending "+a);try{s?g(r,o):s=!0;var u=document.createElement("script");u.type="text/javascript",u.src=a,u.onerror=e,r.appendChild(u),n=0}catch(t){5==n++&&e("[JSONP_Poller] Exception: "+t.message)}},this.destroy=function(){g(r,o),document.getElementById(l).removeChild(r)}},convertLongFromServer:function(e,t){if(t&&Array.isArray(t)){if(e==n.LongType.LONG_AS_ARRAY)return t;var r=!1,i=t[0],s=t[1];if(i-2147483647>0&&(i-=2147483648,r=!0),e==n.LongType.LONG_AS_DECIMAL_STRING)return function(e,t,n){if(e<0)return"-9223372036854775808";var r,i,s,o,a,u,c="";return e<0&&(e=-e),a=656*(i=e>>16&65535)+7296*(s=65535&e)+5536*(o=t>>16&65535)+(a=65535&t),u=parseInt(a/1e4,10),a%=1e4,o=u+7671*i+9496*s+6*o,u=parseInt(o/1e4,10),o%=1e4,s=u+4749*i+42*s,u=parseInt(s/1e4,10),s%=1e4,i=u+281*i,u=parseInt(i/1e4,10),i%=1e4,0!==(r=u)&&(c+=r.toString()),0!==c.length?c+=A(i):0!==i&&(c+=i.toString()),0!==c.length?c+=A(s):0!==s&&(c+=s.toString()),0!==c.length?c+=A(o):0!==o&&(c+=o.toString()),0!==c.length?c+=A(a):c+=a.toString(),n&&(c="-"+c),c}(i,s,r);if(e==n.LongType.LONG_AS_HEXADECIMAL_STRING)return function(e,t,n){var r=t.toString(16);if(0!==e){for(;r.length<8;)r="0"+r;r=e.toString(16)+r}return n&&(r="-"+r),r}(i,s,r);var o=4294967296*i+s;return r&&(o=-o),o}return t}}}(),f=function(){var r,s,o,l,d,m=!1,v=null,_=0,R=null,T=!1,C=0,L=0,I=0,b=0,A=0,O=1e3*(Math.floor(30*Math.random())+30);function N(t,r,i){if(!i||!H.length){if(void 0===t)H=G;else{for(var s=[],a=0;a<t.length;a++){var u=t[a];void 0!==n.Driver[u]?s.push(u):h[e.Nirvana].notifyListeners(n.Observe.ERROR,o,new S(u))}H=s.length?s:G}if(r&&(l=H,9==(-1!=(d=navigator.userAgent.toLowerCase()).indexOf("msie")&&parseInt(d.split("msie")[1],10))&&function(e){var t=l.indexOf(e);t>-1&&l.splice(t,1)}(k.Names.JSONP_LONGPOLL),H=l),I=0,o.getConfig().rememberDriver){var c=p.getCookie("NirvanaDriver");if(null!==c)for(var g=0;g<H.length;g++)H[g]==c&&(I=g)}o.notifyListeners(n.Observe.DRIVER_CHANGE,o,H[I])}var l,d}function M(){if(p.isLoggingEnabled()&&p.Logger.log(6,"[Transport] Opening Driver to "+l.realms[b]),o.setLongPollRequestID(-1),null!==(s=f.initializeDriver()))B("driver.open",l.openDriverTimeout),s.open();else{var t=new y(l.drivers);o.notifyListeners(n.Observe.ERROR,o,t),h[e.Nirvana].notifyListeners(n.Observe.ERROR,o,t)}}function D(){T=!1,p.isLoggingEnabled()&&p.Logger.log(6,"[Transport] Tearing Down Driver"),null!==s&&(E.setReady(!1),clearTimeout(r),q(),s.close(),s=null,o.getStatus()===u&&o.notifyListeners(n.Observe.DISCONNECT,o,"Session Disconnected"))}function w(){return l}function P(e){var r;L++,E.setReady(!1),p.isLoggingEnabled()&&p.Logger.log(4,"[Transport] Received Driver OnError Callback with error: "+e),o.getStatus()===g?D():(p.isLoggingEnabled()&&p.Logger.log(3,"[Transport] Driver failure count: "+L),L>=3&&(p.isLoggingEnabled()&&p.Logger.log(3,"[Transport] Driver failure reached maximum permitted count: 3"),p.isLoggingEnabled()&&p.Logger.log(4,"[Transport] Remaining drivers: "+H.join()),H.length>1&&(((I=(I+1)%H.length)>0||1===l.realms.length)&&o.notifyListeners(n.Observe.DRIVER_CHANGE,o,H[I]),L=0),0===I&&(r=(b+1)%l.realms.length,b!=r&&(p.isLoggingEnabled()&&p.Logger.log(6,"[Transport] Moving to another realm: "+l.realms[r]),b=r,o.notifyListeners(n.Observe.REALM_CHANGE,o,l.realms[b]),L=0,N(o.getConfig().drivers,l.applyUserAgentHeuristics,!1)))),function(e){var n;if(p.isLoggingEnabled()&&p.Logger.log(7,"[Transport] Resetting the Session. Reason: "+e),D(),o.getStatus(),n=l.realms.length>1?1e3*L:Math.min(O,1e3*C),o.getStatus()===u){p.isLoggingEnabled()&&p.Logger.log(4,"[Transport] Adding Restart Request to Outbound Engine"),A+1e4<new Date&&(C=0),o.setStatus(c);for(var r=[],s=o.getResources(),g=s.length,h=0;h<g;h++)s[h].isSubscribed()&&r.push(s[h]);if(r.length>0){var f={requestType:i.BATCH_SUBSCRIBE,session:o,resources:r,resubscribe:!0};E.prioritizeCommand(f)}var m={requestType:i.SESSION_START,session:o,reconnect:!0};E.prioritizeCommand(m),E.resetMessagesOnQueue()}if(o.getStatus()===c||o.getStatus()===a){C++;var v=E.peek();null!==v&&v!==t&&v.requestType===i.SESSION_START||E.prioritizeCommand({requestType:i.SESSION_START,session:o,reconnect:o.getStatus()==c}),p.isLoggingEnabled()&&p.Logger.log(6,"[Transport] Recreating Driver to "+o.getStatus()+". Delaying open() for "+n+"ms"),d&&clearTimeout(d),d=setTimeout(M,n)}}("Driver Error: "+e))}function q(){v!==t&&null!==v&&(p.isLoggingEnabled()&&p.Logger.log(2,"[Transport] Clearing Scheduler resetTimeoutID : "+v),p.Scheduler.cancel(v),v=null)}function B(e,t){q(),v=p.Scheduler.schedule((function(){P("Request Timed Out, "+e)}),t),p.isLoggingEnabled()&&p.Logger.log(2,"[Transport] Setting Scheduler resetTimeoutID  : "+v+" for request: "+e)}function x(e){p.isLoggingEnabled()&&p.Logger.log(2,"[Transport] Receiving Data: "+JSON.stringify(e)),q(),m=!1;var t=!1;if(e)for(var n=0;n<e.length;n++)if(o.responseFactory.dispatchResponse(e[n])&&(t=!0,e[n].d[0]==i.CLIENT_CLOSE))return t;return t}function F(e){p.isLoggingEnabled()&&p.Logger.log(2,"[Transport] (Re)Scheduling KeepAlive to occur in 60000 ms"),clearTimeout(r),r=setTimeout((function(){!function(e){m?(p.isLoggingEnabled()&&p.Logger.log(2,"[Transport] Currently inRequest."),F(e)):(p.isLoggingEnabled()&&p.Logger.log(3,"[Transport] Sending KeepAlive"),E.prioritizeCommand({requestType:i.KEEP_ALIVE,session:e}))}(e)}),6e4)}var k=function(){var t={WEBSOCKET:"WEBSOCKET",XHR_STREAMING_CORS:"XHR_STREAMING_CORS",IFRAME_STREAMING_POSTMESSAGE:"IFRAME_STREAMING_POSTMESSAGE",EVENTSOURCE_STREAMING_POSTMESSAGE:"EVENTSOURCE_STREAMING_POSTMESSAGE",XHR_LONGPOLL_CORS:"XHR_LONGPOLL_CORS",XHR_LONGPOLL_POSTMESSAGE:"XHR_LONGPOLL_POSTMESSAGE",JSONP_LONGPOLL:"JSONP_LONGPOLL",NOXD_IFRAME_STREAMING:"NOXD_IFRAME_STREAMING"},n={};n[t.WEBSOCKET]=function(t){var n,r=!0;this.name=t,this.isClientSupported=function(){return"WebSocket"in e||"MozWebSocket"in e},this.usesKeepAlive=function(){return!0},this.open=function(){if(r=!1,this.isClientSupported()){var t,i=document.createElement("a");if(i.href=f.getCurrentRealm(),t="http:"===i.protocol?"ws://"+i.host:"wss://"+i.host,t+="/sv/ws","WebSocket"in e)n=new WebSocket(t);else{if(!("MozWebSocket"in e))return!1;n=new MozWebSocket(t)}var s=function(e){if(r)f.onClose();else{var t=e;e.code&&(t+=" Error Code : "+e.code),e.reason&&(t+=" Reason : "+e.reason),f.onError(t)}};n.onopen=f.onOpen,n.onclose=s,n.onerror=s,n.onmessage=function(e){e.data&&f.d(e.data)}}else f.onError(this.name+" driver not supported by client")},this.send=function(e,t){n.send(t[0]+"&"+t[1]),f.isConnected()&&E.setReady(!0)},this.close=function(){r=!0,n.close()}},n[t.XHR_STREAMING_CORS]=function(t){this.name=t;var n,s,o=null,a=2e3,u=!1,c=f.getCurrentSession().getConfig().maxStreamLengthStreamingCors;this.isClientSupported=function(){return!!e.XMLHttpRequest&&void 0!==(new XMLHttpRequest).withCredentials},this.usesKeepAlive=function(){return!0},this.open=function(){var e=!1;this.isClientSupported()?(o=f.getCurrentRealm()+"/sv/nvLite",(n=new XMLHttpRequest).onreadystatechange=function(){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+" Receiver] "+this.readyState+" : CumulativeResponseLength="+this.responseText.length),3==this.readyState?(a=r.processResponseChunk(this.responseText,a),this.responseText.length>=c&&!e&&(e=!0,p.isLoggingEnabled()&&p.Logger.log(4,"["+t+" Receiver] Reached max stream length "+c+", resetting."),E.prioritizeCommand({requestType:i.CLIENT_CLOSE,clientRequest:!1}))):4!=this.readyState||e||f.onError("Receiver Connection Closed = "+this.status)},(s=new XMLHttpRequest).onreadystatechange=function(){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+" Sender] "+this.readyState+" : CumulativeResponseLength="+this.responseText.length),4==this.readyState&&200!=this.status?f.onError("Sender Connection Status = "+this.status):this.readyState>3&&(f.c(this.responseText),E.setReady(!0))},f.onOpen()):f.onError(this.name+" driver not supported by client")},this.send=function(e,t){u||(e.requestType===i.SESSION_START?(n.open("GET",o+"?"+t[0]),n.withCredentials=!0,n.send()):(s.open("POST",o+"?"+t[0]),s.withCredentials=!0,s.setRequestHeader("Content-Type","text/plain"),s.send(t[1])))},this.close=function(){u||(u=!0,n.abort(),n=null,s.abort(),s=null,f.onClose())}},n[t.IFRAME_STREAMING_POSTMESSAGE]=function(t){this.name=t;var n,r,s=null,o=!1;function a(){o=!0,f.onOpen()}this.isClientSupported=function(){var t=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof e.postMessage||"object"==typeof e.postMessage)&&!t},this.usesKeepAlive=function(){return!0},this.open=function(){this.isClientSupported()?(s=f.getCurrentRealm()+"/sv/nvLite",E.setReady(!1),n=r=new p.CrossDomainProxy(f.getCurrentSession(),this.name,f.getCurrentRealm(),a,f.onError),r.onreadystatechange=function(){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+" Sender] "+this.readyState+" : "+this.responseText),4==this.readyState&&(200!=this.status?f.onError(t+" sender status "+this.status):o&&E.setReady(!0))}):f.onError(this.name+" driver not supported by client")},this.send=function(e,o){e.requestType===i.SESSION_START?function(e){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+" Receiver] "+f.getCurrentRealm()+"/sv/nvLite?"+e),n.proxyRequest("createForeverIFrame",[f.getCurrentRealm()+"/sv/nvLite?"+e])}(o[0]+"&"+o[1]):function(e,n){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+" Sender] "+f.getCurrentRealm()+"/sv/nvLite?"+n),r.open("POST",s+"?"+n[0]),r.send(n[1])}(0,o)},this.close=function(){o=!1,r.abort(),n.destroy(),r=null,n=null,f.onClose()}},n[t.EVENTSOURCE_STREAMING_POSTMESSAGE]=function(t){this.name=t;var n,r=this,i=null;function s(e,n){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+" Sender] "+f.getCurrentRealm()+"/sv/nvLite?"+n),i.open("POST",f.getCurrentRealm()+"/sv/nvLite?"+n[0],!0),i.send(n[1])}this.isClientSupported=function(){if(!("EventSource"in e))return!1;var t=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof e.postMessage||"object"==typeof e.postMessage)&&!t},this.usesKeepAlive=function(){return!0},this.open=function(){this.isClientSupported()?(n=i=new p.CrossDomainProxy(f.getCurrentSession(),this.name,f.getCurrentRealm(),f.onOpen,f.onError),i.onreadystatechange=function(){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+" Sender] "+this.readyState+" : "+this.responseText),4==this.readyState&&(200!=this.status?f.onError(t+" sender status "+this.status):E.setReady(!0))}):f.onError(this.name+" driver not supported by client")},this.send=function(e,i){!function(e){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+" Receiver] "+f.getCurrentRealm()+"/sv/nvLite?"+e),n.proxyRequest("createEventSource",f.getCurrentRealm()+"/sv/nvLite?"+e),r.send=s}(i[0]+"&"+i[1])},this.close=function(){i.abort(),i=null,n=null,f.onClose()}},n[t.XHR_LONGPOLL_CORS]=function(t){this.name=t;var n,s,o=null,a=!1;this.isClientSupported=function(){return!!e.XMLHttpRequest&&void 0!==(new XMLHttpRequest).withCredentials},this.usesKeepAlive=function(){return!1},this.open=function(){this.isClientSupported()?(o=f.getCurrentRealm()+"/sv/nvLite",(n=new XMLHttpRequest).onreadystatechange=function(){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] receiver ("+this.readyState+") : "+this.responseText),4==this.readyState&&(200!=this.status?f.onError(t+" receiver status "+this.status):(f.d(this.responseText),a||setTimeout(r.longpoll,0)))},(s=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&(200!=this.status?f.onError(t+" sender status "+this.status):(this.responseText&&(f.d(this.responseText),a||r.longpoll()),E.setReady(!0)))},f.onOpen()):f.onError(this.name+" driver not supported by client")},this.send=function(e,t){a||(e.requestType===i.KEEP_ALIVE||e.requestType===i.SESSION_START?(n.open("GET",o+"?"+t[0]+"&"+t[1]),n.withCredentials=!0,n.send()):(s.open("POST",o+"?"+t[0]),s.withCredentials=!0,s.setRequestHeader("Content-Type","text/plain"),s.send(t[1])))},this.close=function(){if(!a){a=!0,r.cancelLongpollTimeout();try{n.onreadystatechange=null,s.onreadystatechange=null,n.abort(),s.abort()}catch(e){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] exception on close(): "+e.message)}n=null,s=null,f.onClose()}}},n[t.XHR_LONGPOLL_POSTMESSAGE]=function(t){this.name=t;var n,s,o=null,a=!1;this.isClientSupported=function(){var t=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof e.postMessage||"object"==typeof e.postMessage)&&!t},this.usesKeepAlive=function(){return!1},this.open=function(){function e(){n&&s&&n.initialized&&s.initialized&&f.onOpen()}this.isClientSupported()?(o=f.getCurrentRealm()+"/sv/nvLite",(n=new p.CrossDomainProxy(f.getCurrentSession(),t,f.getCurrentRealm(),e,f.onError)).onreadystatechange=function(){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] receiver: ("+this.readyState+") : "+this.responseText),4==this.readyState&&(200!=this.status?f.onError(t+" receiver status "+this.status):(f.d(this.responseText),a||r.longpoll()))},(s=new p.CrossDomainProxy(f.getCurrentSession(),t,f.getCurrentRealm(),e,f.onError)).onreadystatechange=function(){4==this.readyState&&(200!=this.status?f.onError(t+" sender status "+this.status):(this.responseText&&(f.d(this.responseText),a||r.longpoll()),E.setReady(!0)))}):f.onError(this.name+" driver not supported by client")},this.send=function(e,r){a||(e.requestType===i.KEEP_ALIVE?(p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] receiver requesting: "+r),n.open("GET",o+"?"+r[0]),n.send()):(p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] sender requesting: "+r),s.open("POST",o+"?"+r[0]),s.send(r[1])))},this.close=function(){a||(a=!0,r.cancelLongpollTimeout(),n.onreadystatechange=null,s.onreadystatechange=null,n.abort(),s.abort(),n=null,s=null,f.onClose())}},n[t.JSONP_LONGPOLL]=function(t){this.name=t;var n,s,o=null,a=!1;function u(e){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] receiverResponseHandler: "+e),f.c(e)&&f.isConnected()&&E.setReady(!0),a||r.longpoll()}this.id=p.generateUniqueID(),this.isClientSupported=function(){return!0},this.usesKeepAlive=function(){return!1},this.open=function(){this.isClientSupported()?(o=f.getCurrentRealm()+"/sv/nvLite",e.LPReadyStateCB=u,n=new p.JSONP_Poller(f.onError),s=new p.FormSubmitter,f.onOpen()):f.onError(this.name+" driver not supported by client")},this.send=function(e,r){a||(e.requestType===i.KEEP_ALIVE||e.requestType===i.SESSION_START?(p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] Receiver Req: "+r[0]),n.send(o,r)):(p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] Sender Req: "+r[0]+"&"+r[1]),s.send(o,r)))},this.close=function(){a||(a=!0,r.cancelLongpollTimeout(),n.destroy(),n=null,s.destroy(),s=null,e.LPReadyStateCB=function(){},f.onClose())}},n[t.NOXD_IFRAME_STREAMING]=function(t){this.name=t;var n,r,s=this,a=null,u=!1;function c(e){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] receiverCB: "+typeof e+" "+e),e&&f.c(e)}function g(e,t){f.onError(e)}function l(e,n){if(!u){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+" Sender] "+a+"?"+n);var s=e.requestType===i.CLIENT_CLOSE;r.open("POST",a+"?"+n[0],s),r.onreadystatechange=h,r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");try{return p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] XHR POST: "+n),r.send(n[1]),!0}catch(e){return!1}}}function h(){if(null!==r){var e=r.readyState;if(p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] statechangecb: State now changed to "+e),4===e){var n,i;try{n=r.status}catch(e){p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] statechangecb : failed to read status code")}200===n||0===n?(i=r.responseText,p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] senderCB: "+typeof i+" "+i),i&&f.d(i),E.setReady(!0)):(p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] statechangecb - status of "+n+" forcing session reset"),f.onError("Error transports has been closed"));var s=document.getElementById("NVLSubFrame");if(s)for(;s.hasChildNodes();)s.removeChild(s.lastChild)}}else p.isLoggingEnabled()&&p.Logger.log(1,"["+t+"] statechangecb: Sender is already null")}this.isClientSupported=function(){if(!o)return!0;for(var e=o.getConfig().realms,t=e.length,n=location.host,r=new RegExp("https?://"+n+"/?"),i=0;i<t;i++){var s=p.getCanonicalOrigin(e[i]);if(r.test(s))return!0}return!1},this.usesKeepAlive=function(){return!0},this.open=function(){if(this.isClientSupported())return a=f.getCurrentRealm()+"/sv/nvLite",(r=p.initXMLHTTP("xmlhttp")).onreadystatechange=h,e.onMessage=c,e.errorCB=g,f.onOpen(),!0;f.onError(this.name+" driver not supported by client")},this.send=function(e,r){!function(e){n=p.createForeverIFrame(a+"?"+e,c,g),p.isLoggingEnabled()&&p.Logger.log(1,"["+t+" Receiver] "+a+"?"+e),s.send=l}(r[0]+"&"+r[1])},this.close=function(){u||(u=!0,e.onMessage=function(){},e.errorCB=function(){},r.onreadystatechange=function(){},r.abort(),n.close&&n.close(),r=null,n=null,f.onClose())}};var r=function(){var e=null;function t(){null!==e&&clearTimeout(e)}return{longpoll:function(){if(null!==s){t();var n,r={requestType:i.KEEP_ALIVE,requestID:_++},a=o.requestFactory.buildRequest(r);p.isLoggingEnabled()&&p.Logger.log(1,"["+s.name+"] longpoll() Sending request number "+r.requestID+" of "+_+" for "+U(r.requestType)+" "+a),s.send(r,a),n=s.name,e=setTimeout((function(){f.onError(n+" Longpoll Timeout")}),f.getConfig().sessionTimeoutMs)}else t()},cancelLongpollTimeout:t,processResponseChunk:function(e,t){if(t>e.length)return t;var n;do{if(1===(n=e.indexOf("];[",t)+2)){if(";"!=e.charAt(e.length-1)||"]"!=e.charAt(e.length-2))return t;n=e.length}n>t&&(f.d(e.substring(t,n-1)),t=n)}while(n!=e.length);return t}}}();return{Names:t,WireProtocol:{WEBSOCKET:"nws",XHR_STREAMING_CORS:"ncc",IFRAME_STREAMING_POSTMESSAGE:"nsc",EVENTSOURCE_STREAMING_POSTMESSAGE:"nsse",XHR_LONGPOLL_CORS:"nlpc",XHR_LONGPOLL_POSTMESSAGE:"nlp",JSONP_LONGPOLL:"nlpj",NOXD_IFRAME_STREAMING:"nsc"},createDriver:function(e){return new n[e](e)}}}(),H=[],G=[k.Names.WEBSOCKET,k.Names.XHR_STREAMING_CORS,k.Names.IFRAME_STREAMING_POSTMESSAGE,k.Names.EVENTSOURCE_STREAMING_POSTMESSAGE,k.Names.XHR_LONGPOLL_CORS,k.Names.XHR_LONGPOLL_POSTMESSAGE,k.Names.NOXD_IFRAME_STREAMING,k.Names.JSONP_LONGPOLL];return{Drivers:k,initializeDriver:function e(){if(H.length){var t=k.createDriver(H[I]);return p.isLoggingEnabled()&&p.Logger.log(6,"[Transport] Attempting to use Driver: "+t.name),t.isClientSupported()?t:(p.isLoggingEnabled()&&p.Logger.log(7,"[Transport] Driver not supported: "+t.name),H.splice(I,1),H.length<=I&&(I=0),o.notifyListeners(n.Observe.DRIVER_CHANGE,o,H[I]),e())}return null},supportsDriver:function(e){return k.createDriver(e).isClientSupported()},setPreferredDriver:function(){var e=f.getCurrentDriver();H=[e],I=0,p.isLoggingEnabled()&&p.Logger.log(7,"[Transport] Settled on preferred driver: "+e),w().rememberDriver&&null===p.getCookie("NirvanaDriver")&&p.setCookie("NirvanaDriver",e)},setUp:function(e,t){p.isLoggingEnabled()&&p.Logger.log(6,"[Transport] Setting Up"),o=e,N((l=e.getConfig()).drivers,l.applyUserAgentHeuristics,t)},open:M,tearDown:D,getCurrentDriver:function(){return H[I]},getCurrentRealm:function(){return l.realms[b]},getCurrentSession:function(){return o},getConfig:w,getRequestCountIncrement:function(){return++_},stop:function(){D(),_=0},getNirvanaCookie:function(){return R},onConnect:function(e){R=e,L=0,C=0,A=new Date,T=!0},onOpen:function(){p.isLoggingEnabled()&&p.Logger.log(4,"[Transport] Received Driver OnOpen Callback"),o.getStatus()==a&&E.resetMessagesOnQueue(),E.setReady(!0)},onError:P,onClose:function(){p.isLoggingEnabled()&&p.Logger.log(6,"[Transport] Received Driver OnClose Callback")},send:function(e){if(null!==s){m=!0;var t=o.requestFactory.buildRequest(e);p.isLoggingEnabled()&&p.Logger.log(3,"[Transport] Sending request number "+e.requestID+" of "+_+" for "+U(e.requestType)+" "+t),s&&s.usesKeepAlive()&&F(e.session),B(t,l.sendResponseTimeout),s.send(e,t)}},c:x,d:function(e){return e.length>0&&x(JSON.parse(e))},isConnected:function(){return T}}}(),E=function(){var e=!1,t=[];function n(){if(e&&t.length>0){var s=r();null!==s&&(s.requestType==i.SESSION_START&&f.getCurrentSession().getStatus()===u?(p.Logger.log(3,"[Outbound Engine] Dequeueing unnecessary session start request as already connected.","Req #"+s.requestID),E.dequeueCommand(s.requestID),n()):(e=!1,s.sent=!0,p.isLoggingEnabled()&&p.Logger.log(3,"[Outbound Engine] Sending Command to Transport Layer.","Req #"+s.requestID),f.send(s)))}}function r(){for(var e=t.length,n=0;n<e;n++)if(!t[n].sent)return t[n];return null}return{setReady:function(t){e=t,n()},queueCommand:function(e){e.requestID=f.getRequestCountIncrement(),e.sent=!1,p.isLoggingEnabled()&&p.Logger.log(3,"[Outbound Engine] Queueing Command "+U(e.requestType),e),t.push(e),n()},resetMessagesOnQueue:function(){p.isLoggingEnabled()&&p.Logger.log(2,"[Outbound Engine] Resetting messages on outbound queue");for(var e=0;e<t.length;e++)t[e].requestType===i.KEEP_ALIVE||t[e].requestType===i.CLIENT_CLOSE?t.splice(e,1):(t[e].sent=!1,t[e].requestID=f.getRequestCountIncrement())},prioritizeCommand:function(e){e.requestID=f.getRequestCountIncrement(),e.sent=!1,t.unshift(e),p.isLoggingEnabled()&&p.Logger.log(3,"[Outbound Engine] Prioritizing Command "+U(e.requestType),e),n()},dequeueCommand:function(e){var n=t.length;if(p.isLoggingEnabled()){for(var r="",i=0;i<n;i++)r+=U(t[i].requestType)+" ";p.Logger.log(2,"[Outbound Engine] OutboundQueue = "+r)}for(var s=0;s<n;s++)if(t[s].requestID==e)return p.isLoggingEnabled()&&p.Logger.log(3,"[Outbound Engine] Dequeueing Command "+U(t[s].requestType),t[s],e),t.splice(s,1)[0];return p.isLoggingEnabled()&&p.Logger.log(3,"[Outbound Engine] No matching queued command to dequeue for request ID: ",e),null},peek:r}}();function m(){var e=[],t=!1;return{on:function(n,r){var i=e[n];e[n]||(i=[],e[n]=i);for(var s=i.length,o=0;o<s;o++)if(r==i[o])return;t&&(i=i.slice(0),e[n]=i),i.push(r)},removeListener:function(n,r){var i=e[n];if(i){!0===r&&(i=[],e[n]=i),t&&(i=i.slice(0),e[n]=i);for(var s=i.length,o=0;o<s;o++)if(r==i[o])return void i.splice(o,1)}},notifyListeners:function(n,r,i){var s=e[n];if(s){t=!0;for(var o=s.length,a=0;a<o;a++){var u=s[a];p.isLoggingEnabled()&&p.Logger.log(0,"[NotifyListeners] "+u+" : "+i);try{u(r,i)}catch(e){p.isLoggingEnabled()&&p.Logger.logException(9,e)}}t=!1}}}}function v(e,t){h[e]=t}function _(e){this.name="AlreadySubscribedException",null!=e&&(this.message="Already subscribed to "+e),p.isLoggingEnabled()&&p.Logger.log(7,"["+this.name+"] "+this.message)}function S(e){this.name="InvalidDriverException",null!=e&&(this.message=e+" is not a valid driver name"),p.isLoggingEnabled()&&p.Logger.log(7,"["+this.name+"] "+this.message)}function y(e){this.name="NoValidDriversException",this.message="This client does not support any of the currently configured drivers",p.isLoggingEnabled()&&p.Logger.log(8,"["+this.name+"] "+this.message,e)}function R(e,t){this.name="DriverSecurityException",null!=e&&(this.message=e+" - "+t),p.isLoggingEnabled()&&p.Logger.log(7,"["+this.name+"] "+this.message)}function T(e,t){this.name="SessionException",null!=e&&(this.message=e+" - "+t),p.isLoggingEnabled()&&p.Logger.log(7,"["+this.name+"] "+this.message)}function C(e){this.name="SecurityException",this.message=e,p.isLoggingEnabled()&&p.Logger.log(7,"["+this.name+"] "+this.message)}function L(e,t){this.name="MissingResourceException",this.resourceName=e,this.message=t,p.isLoggingEnabled()&&p.Logger.log(7,"["+this.name+"] "+this.message)}function I(e){this.name="GenericException",e&&(this.errorMessage=e),p.isLoggingEnabled()&&p.Logger.log(7,"["+this.name+"] "+this.errorMessage)}function b(t){var s,c=this,d=m(),S=t,y="-1",R="",C=o,L=-1,I=[],b={g1:""};return v(c,d),this.start=function(){if(C!==o&&C!==g)return h[e.Nirvana].notifyListeners(n.Observe.ERROR,s,new T("Nirvana Session","start() can only be invoked on a new or stopped session")),s;var t=C===g;if(null===document.getElementById(l))return n.initialize(),p.isLoggingEnabled()&&p.Logger.log(1,"[Nirvana] Waiting for DOM to be ready"),setTimeout(c.start,15),s;p.isLoggingEnabled()&&p.Logger.log(6,"[Session] Creating Session"),C=a;var r={session:c,requestType:i.SESSION_START,listenerManager:d};E.prioritizeCommand(r),f.setUp(c,t),f.open();var u=function(){c.stop(!0)};return e.addEventListener?e.addEventListener("beforeunload",u,!1):e.attachEvent&&e.attachEvent("onbeforeunload",u),s},this.stop=function(e){if(p.isLoggingEnabled()&&p.Logger.log(6,"[Session] Stopping Session"),C===g||C===o)return s;C=g;var t={requestType:i.CLIENT_CLOSE,clientRequest:!0};return e?E.prioritizeCommand(t):E.queueCommand(t),s},this.destroy=function(){return this.stop(),r=null,s},this.subscribe=function(t){try{for(var r=[],o=0;o<t.length;o++){var a=t[o];if(a.isSubscribed()){var u=new _(a.getName());a.notifyListeners(n.Observe.ERROR,a,u),d.notifyListeners(n.Observe.ERROR,s,u),h[e.Nirvana].notifyListeners(n.Observe.ERROR,s,u)}else r.push(c.getResourceByName(a.getName()))}if(t.length){var g=c.prepareCommand(i.BATCH_SUBSCRIBE);g.resources=r,E.queueCommand(g)}}catch(t){p.isLoggingEnabled()&&p.Logger.logException(8,t),h[e.Nirvana].notifyListeners(n.Observe.ERROR,s,t)}return s},this.getChannel=function(e){e=p.getCanonicalResourceName(e);var t=c.getResourceByName(e);if(t)return t.getClientResource();var n=m();return v(t=new A(e,n,c),n),t},this.getQueue=function(e,t){e=p.getCanonicalResourceName(e);var n=c.getResourceByName(e);if(n)return n.getClientResource();var r=m();return v(n=t?new N(e,r,c):new O(e,r,c),r),n},this.notifyListeners=function(e,t,n){d.notifyListeners(e,t,n)},this.on=function(e,t){return d.on(e,t),s},this.removeListener=function(e,t){return d.removeListener(e,t),s},this.getUsername=function(){return S.username},this.getCurrentDriver=function(){return f.getCurrentDriver()},this.getCurrentRealm=function(){return f.getCurrentRealm()},this.pushResource=function(e){I.push(e)},this.setGroupAlias=function(e,t){b[t]=e},this.getGroupName=function(e){return b[e]},this.getResources=function(){return I},this.getResourceByName=function(e){for(var t=I.length,n=0;n<t;n++){var r=I[n];if(r.getName()==e)return r}},this.setResourceAlias=function(e,t){for(var n=I.length,r=0;r<n;r++){var i=I[r];if(i.getName()===e)return void i.setAlias(t)}},this.getResourceByAlias=function(e){for(var t=I.length,n=0;n<t;n++){var r=I[n];if(r.getAlias()===e)return r}},this.setSessionID=function(e){y=""+e,C=u},this.setDataStreamID=function(e){R=""+e},this.getLongPollRequestID=function(){return L},this.setLongPollRequestID=function(e){L=e},this.getSessionID=function(){return y},this.getDataStreamID=function(){return R},this.getConfig=function(){return S},this.setStatus=function(e){C=e},this.getStatus=function(){return C},this.isDataStreamEnabled=function(){return S.enableDataStreams},this.prepareCommand=function(e){return{session:this,requestType:e}},this.requestFactory=p.HTTPRequestFactory(),this.responseFactory=p.HTTPResponseFactory(c),s={on:this.on,removeListener:this.removeListener,isDataStreamEnabled:this.isDataStreamEnabled,getConfig:this.getConfig,getStatus:this.getStatus,getChannel:this.getChannel,getQueue:this.getQueue,getUsername:this.getUsername,getSessionID:this.getSessionID,getDataStreamID:this.getDataStreamID,getCurrentRealm:this.getCurrentRealm,getCurrentDriver:this.getCurrentDriver,start:this.start,stop:this.stop,destroy:this.destroy,subscribe:this.subscribe}}function A(e,t,r){var s,o,a=this,u=t,c=!1,g=0,l="",h=-1;return this.getClientResource=function(){return s},this.subscribe=function(){var e={requestType:i.RESOURCE_SUBSCRIBE,session:r,resource:a};return E.queueCommand(e),s},this.unsubscribe=function(){var e={requestType:i.RESOURCE_UNSUBSCRIBE,session:r,resource:a};return E.queueCommand(e),s},this.getAlias=function(){return o},this.setAlias=function(e){o=e},this.setSubscribed=function(e){!1===(c=e)&&(h=-1)},this.isSubscribed=function(){return c},this.publish=function(e){var t={requestType:i.RESOURCE_PUBLISH,session:r,resource:a,event:e};return E.queueCommand(t),s},this.createTransaction=function(){var e=m();return new P(r.getSessionID()+p.generateTransactionID(),e,a)},this.getStartEID=function(){return g},this.setStartEID=function(e){return g=e,s},this.getCurrentEID=function(){return h},this.setCurrentEID=function(e){h=e},this.getFilter=function(){return l},this.setFilter=function(e){return l=e,s},this.getName=function(){return e},this.getResourceType=function(){return n.CHANNEL_RESOURCE},this.on=function(e,t){return u.on(e,t),s},this.removeListener=function(e,t){return u.removeListener(e,t),s},this.notifyListeners=function(e,t,n){u.notifyListeners(e,t,n)},r.pushResource(a),s={on:this.on,removeListener:this.removeListener,subscribe:this.subscribe,unsubscribe:this.unsubscribe,isSubscribed:this.isSubscribed,publish:this.publish,createTransaction:this.createTransaction,getStartEID:this.getStartEID,setStartEID:this.setStartEID,getFilter:this.getFilter,setFilter:this.setFilter,getName:this.getName,getResourceType:this.getResourceType}}function O(e,t,r){var s,o,a=this,u=t,c=!1,g="";return this.getClientResource=function(){return s},this.subscribe=function(){var e={requestType:i.RESOURCE_SUBSCRIBE,session:r,resource:a};return E.queueCommand(e),s},this.unsubscribe=function(){var e={requestType:i.RESOURCE_UNSUBSCRIBE,session:r,resource:a};return E.queueCommand(e),s},this.getAlias=function(){return o},this.setAlias=function(e){o=e},this.setSubscribed=function(e){c=e},this.isSubscribed=function(){return c},this.publish=function(e){var t={requestType:i.RESOURCE_PUBLISH,session:r,resource:a,event:e};return E.queueCommand(t),s},this.createTransaction=function(){var e=m();return new P(r.getSessionID()+p.generateTransactionID(),e,a)},this.getFilter=function(){return g},this.setFilter=function(e){return g=e,s},this.getName=function(){return e},this.getResourceType=function(){return n.QUEUE_RESOURCE},this.on=function(e,t){return u.on(e,t),s},this.removeListener=function(e,t){return u.removeListener(e,t),s},this.notifyListeners=function(e,t,n){u.notifyListeners(e,t,n)},r.pushResource(a),s={on:this.on,removeListener:this.removeListener,subscribe:this.subscribe,unsubscribe:this.unsubscribe,isSubscribed:this.isSubscribed,publish:this.publish,getFilter:this.getFilter,setFilter:this.setFilter,getName:this.getName,getResourceType:this.getResourceType,createTransaction:this.createTransaction}}function N(e,t,r){var s,o,a=this,u=!1,c=t,g="",l=5;return this.getClientResource=function(){return s},this.subscribe=function(){var e={requestType:i.RESOURCE_SUBSCRIBE,session:r,resource:a};return E.queueCommand(e),s},this.unsubscribe=function(){var e={requestType:i.RESOURCE_UNSUBSCRIBE,session:r,resource:a};return E.queueCommand(e),s},this.getAlias=function(){return o},this.setAlias=function(e){o=e},this.setSubscribed=function(e){u=e},this.isSubscribed=function(){return u},this.publish=function(e){var t={requestType:i.RESOURCE_PUBLISH,session:r,resource:a,event:e};return E.queueCommand(t),s},this.createTransaction=function(){var e=m();return new P(r.getSessionID()+p.generateTransactionID(),e,a)},this.commit=function(e){var t={requestType:i.QUEUE_COMMIT,session:r,resource:a,event:e};return E.queueCommand(t),s},this.commitAll=function(){var e={requestType:i.QUEUE_COMMIT,session:r,resource:a,event};return E.queueCommand(e),s},this.rollback=function(e){var t={requestType:i.QUEUE_ROLLBACK,session:r,resource:a,event:e};return E.queueCommand(t),s},this.getFilter=function(){return g},this.setFilter=function(e){return g=e,s},this.getWindowSize=function(){return l},this.setWindowSize=function(e){return l=e,s},this.getName=function(){return e},this.getResourceType=function(){return n.TRANSACTIONAL_QUEUE_RESOURCE},this.on=function(e,t){return c.on(e,t),s},this.removeListener=function(e,t){return c.removeListener(e,t),s},this.notifyListeners=function(e,t,n){c.notifyListeners(e,t,n)},r.pushResource(a),s={on:this.on,removeListener:this.removeListener,subscribe:this.subscribe,unsubscribe:this.unsubscribe,isSubscribed:this.isSubscribed,publish:this.publish,commitAll:this.commitAll,commit:this.commit,rollback:this.rollback,getFilter:this.getFilter,setFilter:this.setFilter,getWindowSize:this.getWindowSize,setWindowSize:this.setWindowSize,getName:this.getName,getResourceType:this.getResourceType,createTransaction:this.createTransaction}}function M(e,t,n,r,i,s,o,a){this.parentSession=e,this.dictionary=a,this.eventAttributes=i,this._data=s,this.tag=o,this.ttl=0,this.resource=n,this.eventID=t,this.resourceName=r}function D(e){this.innerProperties=e}function w(e){this.innerAttributes=e}function P(e,t,n){var r,o,a=this,u=t,c=n,g=!1;return this.getTxID=function(){return e},this.publishAndCommit=function(){var e={requestType:i.TX_PUBLISH,transaction:a,resource:c,event:o};return E.queueCommand(e),r},this.setIsCommitted=function(e){g=e},this.checkCommitStatus=function(e){!g&&e||u.notifyListeners(s.COMMIT,r,!0);var t={requestType:i.TX_IS_COMMITTED,transaction:a};return E.queueCommand(t),r},this.setEvent=function(e){return o=e,r},this.on=function(e,t){return u.on(e,t),r},this.removeListener=function(e,t){return u.removeListener(e,t),r},this.notifyListeners=function(e,t,n){u.notifyListeners(e,t,n)},r={on:this.on,removeListener:this.removeListener,checkCommitStatus:this.checkCommitStatus,publishAndCommit:this.publishAndCommit,setEvent:this.setEvent}}function U(e){return function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]==t)return n}(i,e)+" ["+e+"]"}return M.prototype.getSession=function(){return this.parentSession},M.prototype.getResource=function(){return this.resource},M.prototype.getResourceName=function(){return this.resourceName},M.prototype.getTTL=function(){return this.ttl},M.prototype.setTTL=function(e){return this.ttl=e,this},M.prototype.getEID=function(e){return p.convertLongFromServer(e,this.eventID)},M.prototype.getData=function(e){return e==n.BYTE_ARRAY_AS_BASE64_STRING?this._data:e==n.BYTE_ARRAY_AS_INT_ARRAY?p.base64Decode(this._data,!0):p.base64Decode(this._data)},M.prototype.setData=function(e,t){return t==n.BYTE_ARRAY_AS_BASE64_STRING?this._data=e:t==n.BYTE_ARRAY_AS_INT_ARRAY?this._data=p.base64Encode(e,!0):this._data=p.base64Encode(e),this},M.prototype.getTag=function(){return this.tag},M.prototype.setTag=function(e){return this.tag=e,this},M.prototype.getDictionary=function(){return this.dictionary||(this.dictionary=new D({})),this.dictionary},M.prototype.getEventAttributes=function(){return this.eventAttributes||(this.eventAttributes=new w({})),this.eventAttributes},M.prototype.hasData=function(){return this._data!==t},M.prototype.hasTag=function(){return this.tag!==t},M.prototype.hasDictionary=function(){return this.dictionary!==t},D.STRING=0,D.LONG=1,D.DOUBLE=2,D.BOOLEAN=3,D.INTEGER=4,D.FLOAT=5,D.CHARACTER=6,D.BYTE=7,D.DICTIONARY=9,D.ARRAY=-1,D.createDictionary=function(){return new D({})},D.prototype.getKeys=function(){var e=[];for(var t in this.innerProperties)this.innerProperties.hasOwnProperty(t)&&e.push(t);return e},D.prototype.get=function(e,t){if(this.innerProperties.hasOwnProperty(e)){var r=this.innerProperties[e];if(r[0]===n.EventDictionary.ARRAY){if(r[1]===n.EventDictionary.LONG){for(var i=r[2].length,s=r[2],o=[],a=0;a<i;a++)o[a]=p.convertLongFromServer(t,s[a]);return o}return r[2]}return r[0]===n.EventDictionary.LONG?p.convertLongFromServer(t,r[1]):r[1]}return null},D.prototype.getType=function(e){return this.innerProperties[e][0]},D.prototype.getArrayType=function(e){return this.innerProperties[e][1]},D.prototype.put=function(e,t,n){return this.innerProperties[e]=[n,t],this},D.prototype.putString=function(e,t){return this.innerProperties[e]=[D.STRING,t],this},D.prototype.putLong=function(e,t){return this.innerProperties[e]=[D.LONG,t],this},D.prototype.putDouble=function(e,t){return this.innerProperties[e]=[D.DOUBLE,t],this},D.prototype.putBoolean=function(e,t){return this.innerProperties[e]=[D.BOOLEAN,t],this},D.prototype.putInteger=function(e,t){return this.innerProperties[e]=[D.INTEGER,t],this},D.prototype.putFloat=function(e,t){return this.innerProperties[e]=[D.FLOAT,t],this},D.prototype.putChar=function(e,t){return this.innerProperties[e]=[D.CHARACTER,t],this},D.prototype.putByte=function(e,t){return this.innerProperties[e]=[D.BYTE,t],this},D.prototype.putDictionary=function(e,t){return this.innerProperties[e]=[D.DICTIONARY,t],this},D.prototype.putArray=function(e,t,n){return this.innerProperties[e]=[D.ARRAY,n,t],this},w.HEADER_KEYS=["_allowMerging","pubHost","pubName","subHost","subName","subID","messageType"],w.SERVER_HEADER_KEYS=["timeStamp","_isDelta","_isRedelivered","_isRegistered","deadEID","deadEventChannel","joinEID","joinChannel","joinRealm","joinPath"],w.JMS_HEADER_KEYS=["messageID","correlationID","type","expiration","destination","deliveryMode","priority","userID","appID","replyToName","replyToType"],w.prototype.getSubscriberHost=function(){return this.innerAttributes.subHost},w.prototype.getSubscriberName=function(){return this.innerAttributes.subName},w.prototype.getSubscriberID=function(){return this.innerAttributes.subID},w.prototype.getPublisherHost=function(){return this.innerAttributes.pubHost},w.prototype.getPublisherName=function(){return this.innerAttributes.pubName},w.prototype.setSubscriberHost=function(e){return this.innerAttributes.subHost=e,this},w.prototype.setSubscriberName=function(e){return this.innerAttributes.subName=e,this},w.prototype.setSubscriberNames=function(e){return this.innerAttributes.subName=e,this},w.prototype.setPublisherName=function(e){return this.innerAttributes.pubName=e,this},w.prototype.setPublisherHost=function(e){return this.innerAttributes.pubHost=e,this},w.prototype.getAttribute=function(e){return this.innerAttributes[e]},w.prototype.getAttributeNames=function(){var e=[];for(var t in this.innerAttributes)this.innerAttributes.hasOwnProperty(t)&&e.push(t);return e},w.prototype.setAttribute=function(e,t){return this.innerAttributes[e]=t,this},w.prototype.getTimeStamp=function(e){return p.convertLongFromServer(e,this.innerAttributes.timeStamp)},w.prototype.getAllowMerge=function(){return this.innerAttributes._allowMerging},w.prototype.isDelta=function(){return this.innerAttributes._isDelta},w.prototype.isRedelivered=function(){return this.innerAttributes._isRedelivered},w.prototype.isRegistered=function(){return this.innerAttributes._isRegistered},w.prototype.getJoinChannel=function(){return this.innerAttributes.joinChannel},w.prototype.getJoinEID=function(e){return p.convertLongFromServer(e,this.innerAttributes.joinEID)},w.prototype.getJoinPath=function(){return this.innerAttributes.joinPath},w.prototype.getJoinRealm=function(){return this.innerAttributes.joinRealm},w.prototype.getDeadEID=function(e){return p.convertLongFromServer(e,this.innerAttributes.deadEID)},w.prototype.getDeadEventStore=function(){return this.innerAttributes.deadEventChannel},w.prototype.getApplicationID=function(){return this.innerAttributes.appID},w.prototype.getCorrelationID=function(){return this.innerAttributes.correlationID},w.prototype.getDeliveryMode=function(){return this.innerAttributes.deliveryMode},w.prototype.getDestination=function(){return this.innerAttributes.destination},w.prototype.getExpiration=function(e){return p.convertLongFromServer(e,this.innerAttributes.expiration)},w.prototype.getMessageID=function(){return this.innerAttributes.messageID},w.prototype.getMessageType=function(){return this.innerAttributes.messageType},w.prototype.getPriority=function(){return this.innerAttributes.priority},w.prototype.getRedeliveredCount=function(){return this.innerAttributes.redeliveredCount},w.prototype.getReplyToName=function(){return this.innerAttributes.replyToName},w.prototype.getReplyType=function(){return this.innerAttributes.replyToType},w.prototype.getType=function(){return this.innerAttributes.type},w.prototype.getUserID=function(){return this.innerAttributes.userID},w.prototype.setAllowMerge=function(e){return this.innerAttributes._allowMerging=e,this},w.prototype.setApplicationID=function(e){return this.innerAttributes.appID=e,this},w.prototype.setCorrelationID=function(e){return this.innerAttributes.correlationID=e,this},w.prototype.setDeliveryMode=function(e){return this.innerAttributes.deliveryMode=e,this},w.prototype.setDestination=function(e){return this.innerAttributes.destination=e,this},w.prototype.setExpiration=function(e){return this.innerAttributes.expiration=e,this},w.prototype.setMessageID=function(e){return this.innerAttributes.messageID=e,this},w.prototype.setMessageType=function(e){return this.innerAttributes.messageType=e,this},w.prototype.setPriority=function(e){return this.innerAttributes.priority=e,this},w.prototype.setReplyToName=function(e){return this.innerAttributes.replyToName=e,this},w.prototype.setReplyType=function(e){return this.innerAttributes.replyToType=e,this},w.prototype.setType=function(e){return this.innerAttributes.type=e,this},w.prototype.setUserID=function(e){return this.innerAttributes.userID=e,this},w.prototype.setSubscriberID=function(e){return this.innerAttributes.subID=e,this},{VERSION_NUMBER:"10.3.0.0",BUILD_NUMBER:"112089-112089",BUILD_DATE:"August 27 2018",Observe:s,BYTE_ARRAY_AS_STRING:0,BYTE_ARRAY_AS_BASE64_STRING:1,BYTE_ARRAY_AS_INT_ARRAY:2,CHANNEL_RESOURCE:1,QUEUE_RESOURCE:2,TRANSACTIONAL_QUEUE_RESOURCE:3,Driver:f.Drivers.Names,clientSupportsDriver:f.supportsDriver,initialize:function(){var e=null,t=function(){try{if(null===document.getElementById(l)){var t=document.createElement("span");t.style.display="none",t.setAttribute("id",l),document.getElementsByTagName("body")[0].appendChild(t),clearInterval(e)}}catch(e){}};t(),null===document.getElementById(l)&&(e=setInterval((function(){t()}),10))},createSession:function(e){return r&&r.getStatus()!==g&&r.getStatus()!==o?(d.notifyListeners(n.Observe.ERROR,r,{name:"SessionExistsException",message:"Cannot Create Session: Session Already Exists"}),t):(r=new b(function(e){function t(e,t){return null==e?t:!!e}function n(e,t){return e=parseInt(e,10),isNaN(e)&&(e=t),e}if(null==e&&(e={}),e.debugLevel=n(e.debugLevel,9),p.setDebugLevel(e.debugLevel),void 0===e.applicationName&&(e.applicationName="GenericJSClient"),void 0===e.sessionName&&(e.sessionName="GenericJSSession"),void 0===e.username&&(e.username="JSUser_"+p.generateUniqueID()),void 0===e.crossDomainPath&&(e.crossDomainPath="/lib/js"),void 0===e.realms){var r=document.location.protocol+"//"+document.location.hostname;document.location.host.match(/:[0-9]+$/)?r+=":"+document.location.port:r=p.getCanonicalOrigin(r),e.realms=[r]}var i=document.location.protocol+"//"+document.location.hostname;if("file:"!=document.location.protocol&&(document.location.host.match(/:[0-9]+$/)?i+=":"+document.location.port:i=p.getCanonicalOrigin(i)),e.currentDomain=i,e.serverLogging=t(e.serverLogging,!1),e.verboseKeepalives=t(e.verboseKeepalives,!1),e.enableDataStreams=t(e.enableDataStreams,!0),e.sessionTimeoutMs=n(e.sessionTimeoutMs,12e4),e.sendResponseTimeout=n(e.sendResponseTimeout,1e4),e.openDriverTimeout=n(e.openDriverTimeout,15e3),e.maxStreamLengthStreamingCors=n(e.maxStreamLengthStreamingCors,1e7),e.rememberDriver=t(e.rememberDriver,!1),e.applyUserAgentHeuristics=t(e.applyUserAgentHeuristics,!1),p.isLoggingEnabled()){var s="";for(var o in e)if(e.hasOwnProperty(o)){var a=e[o];s+=o+":\t",a.constructor==Array?s+=a.join("\n\t\t"):s+=a,s+="\n"}p.Logger.log(5,"[Session] Configuration:\n"+s)}return e}(e)),r)},createEvent:function(){return new M(t,-1,t,t,t,t,t,t)},createDictionary:function(){return D.createDictionary()},on:function(t,n){null===d&&(d=m(),v(e.Nirvana,d)),d.on(t,n)},removeListener:function(e,t){d.removeListener(e,t)},Utils:{isLoggingEnabled:p.isLoggingEnabled,Logger:p.Logger,base64Encode:p.base64Encode,base64Decode:p.base64Decode},EventDictionary:{STRING:0,LONG:1,DOUBLE:2,BOOLEAN:3,INTEGER:4,FLOAT:5,CHARACTER:6,BYTE:7,DICTIONARY:9,ARRAY:-1},LongType:{LONG_AS_NUMBER:0,LONG_AS_ARRAY:1,LONG_AS_DECIMAL_STRING:2,LONG_AS_HEXADECIMAL_STRING:3}}}();e.Nirvana=n,n.on(n.Observe.ERROR,(function(e,t){n.Utils.Logger.log(8,"System Error: "+t.message,e)})),e.addEventListener?e.addEventListener("load",n.initialize,!1):e.attachEvent&&e.attachEvent("onload",n.initialize)}(window)},272:function(e){var t;t=function(){var e=function(e){var t=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var i="Unknown property, "+n+". Valid properties are:";for(var o in t)t.hasOwnProperty(o)&&(i=i+" "+o);throw new Error(i)}if(typeof e[n]!==t[n])throw new Error(s(r.INVALID_TYPE,[typeof e[n],n]))}},n=function(e,t){return function(){return e.apply(t,arguments)}},r={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},i={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},s=function(e,t){var n=e.text;if(t)for(var r,i,s=0;s<t.length;s++)if(r="{"+s+"}",(i=n.indexOf(r))>0){var o=n.substring(0,i),a=n.substring(i+r.length);n=o+t[s]+a}return n},o=[0,6,77,81,73,115,100,112,3],a=[0,4,77,81,84,84,4],u=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function c(e,t){var n,r=t,i=e[t],s=i>>4,o=i&=15;t+=1;var a=0,c=1;do{if(t==e.length)return[null,r];a+=(127&(n=e[t++]))*c,c*=128}while(0!=(128&n));var g=t+a;if(g>e.length)return[null,r];var l=new u(s);switch(s){case 2:1&e[t++]&&(l.sessionPresent=!0),l.returnCode=e[t++];break;case 3:var d=o>>1&3,p=h(e,t),E=f(e,t+=2,p);t+=p,d>0&&(l.messageIdentifier=h(e,t),t+=2);var m=new Paho.MQTT.Message(e.subarray(t,g));1==(1&o)&&(m.retained=!0),8==(8&o)&&(m.duplicate=!0),m.qos=d,m.destinationName=E,l.payloadMessage=m;break;case 4:case 5:case 6:case 7:case 11:l.messageIdentifier=h(e,t);break;case 9:l.messageIdentifier=h(e,t),t+=2,l.returnCode=e.subarray(t,g)}return[l,g]}function g(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function l(e,t,n,r){return p(e,n,r=g(t,n,r)),r+t}function h(e,t){return 256*e[t]+e[t+1]}function d(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,t++),t+=3):r>127?t+=2:t++}return t}function p(e,t,n){for(var i=n,o=0;o<e.length;o++){var a=e.charCodeAt(o);if(55296<=a&&a<=56319){var u=e.charCodeAt(++o);if(isNaN(u))throw new Error(s(r.MALFORMED_UNICODE,[a,u]));a=u-56320+(a-55296<<10)+65536}a<=127?t[i++]=a:a<=2047?(t[i++]=a>>6&31|192,t[i++]=63&a|128):a<=65535?(t[i++]=a>>12&15|224,t[i++]=a>>6&63|128,t[i++]=63&a|128):(t[i++]=a>>18&7|240,t[i++]=a>>12&63|128,t[i++]=a>>6&63|128,t[i++]=63&a|128)}return t}function f(e,t,n){for(var i,o="",a=t;a<t+n;){var u=e[a++];if(u<128)i=u;else{var c=e[a++]-128;if(c<0)throw new Error(s(r.MALFORMED_UTF,[u.toString(16),c.toString(16),""]));if(u<224)i=64*(u-192)+c;else{var g=e[a++]-128;if(g<0)throw new Error(s(r.MALFORMED_UTF,[u.toString(16),c.toString(16),g.toString(16)]));if(u<240)i=4096*(u-224)+64*c+g;else{var l=e[a++]-128;if(l<0)throw new Error(s(r.MALFORMED_UTF,[u.toString(16),c.toString(16),g.toString(16),l.toString(16)]));if(!(u<248))throw new Error(s(r.MALFORMED_UTF,[u.toString(16),c.toString(16),g.toString(16),l.toString(16)]));i=262144*(u-240)+4096*c+64*g+l}}}i>65535&&(i-=65536,o+=String.fromCharCode(55296+(i>>10)),i=56320+(1023&i)),o+=String.fromCharCode(i)}return o}u.prototype.encode=function(){var e,t=(15&this.type)<<4,n=0,r=[],i=0;switch(void 0!==this.messageIdentifier&&(n+=2),this.type){case 1:switch(this.mqttVersion){case 3:n+=o.length+3;break;case 4:n+=a.length+3}n+=d(this.clientId)+2,void 0!==this.willMessage&&(n+=d(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(u)),n+=e.byteLength+2),void 0!==this.userName&&(n+=d(this.userName)+2),void 0!==this.password&&(n+=d(this.password)+2);break;case 8:t|=2;for(var s=0;s<this.topics.length;s++)r[s]=d(this.topics[s]),n+=r[s]+2;n+=this.requestedQos.length;break;case 10:for(t|=2,s=0;s<this.topics.length;s++)r[s]=d(this.topics[s]),n+=r[s]+2;break;case 6:t|=2;break;case 3:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),n+=(i=d(this.payloadMessage.destinationName))+2;var u=this.payloadMessage.payloadBytes;n+=u.byteLength,u instanceof ArrayBuffer?u=new Uint8Array(u):u instanceof Uint8Array||(u=new Uint8Array(u.buffer))}var c=function(e){var t=new Array(1),n=0;do{var r=e%128;(e>>=7)>0&&(r|=128),t[n++]=r}while(e>0&&n<4);return t}(n),h=c.length+1,p=new ArrayBuffer(n+h),f=new Uint8Array(p);if(f[0]=t,f.set(c,1),3==this.type)h=l(this.payloadMessage.destinationName,i,f,h);else if(1==this.type){switch(this.mqttVersion){case 3:f.set(o,h),h+=o.length;break;case 4:f.set(a,h),h+=a.length}var E=0;this.cleanSession&&(E=2),void 0!==this.willMessage&&(E|=4,E|=this.willMessage.qos<<3,this.willMessage.retained&&(E|=32)),void 0!==this.userName&&(E|=128),void 0!==this.password&&(E|=64),f[h++]=E,h=g(this.keepAliveInterval,f,h)}switch(void 0!==this.messageIdentifier&&(h=g(this.messageIdentifier,f,h)),this.type){case 1:h=l(this.clientId,d(this.clientId),f,h),void 0!==this.willMessage&&(h=l(this.willMessage.destinationName,d(this.willMessage.destinationName),f,h),h=g(e.byteLength,f,h),f.set(e,h),h+=e.byteLength),void 0!==this.userName&&(h=l(this.userName,d(this.userName),f,h)),void 0!==this.password&&(h=l(this.password,d(this.password),f,h));break;case 3:f.set(u,h);break;case 8:for(s=0;s<this.topics.length;s++)h=l(this.topics[s],r[s],f,h),f[h++]=this.requestedQos[s];break;case 10:for(s=0;s<this.topics.length;s++)h=l(this.topics[s],r[s],f,h)}return p};var E=function(e,t,n){this._client=e,this._window=t,this._keepAliveInterval=1e3*n,this.isReset=!1;var i=new u(12).encode(),o=function(e){return function(){return a.apply(e)}},a=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(i),this.timeout=this._window.setTimeout(o(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(r.PING_TIMEOUT.code,s(r.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(o(this),this._keepAliveInterval))},this.cancel=function(){this._window.clearTimeout(this.timeout)}},m=function(e,t,n,r,i){this._window=t,n||(n=30),this.timeout=setTimeout(function(e,t,n){return function(){return e.apply(t,n)}}(r,e,i),1e3*n),this.cancel=function(){this._window.clearTimeout(this.timeout)}},v=function(t,n,i,o,a){if(!("WebSocket"in e)||null===e.WebSocket)throw new Error(s(r.UNSUPPORTED,["WebSocket"]));if(!("localStorage"in e)||null===e.localStorage)throw new Error(s(r.UNSUPPORTED,["localStorage"]));if(!("ArrayBuffer"in e)||null===e.ArrayBuffer)throw new Error(s(r.UNSUPPORTED,["ArrayBuffer"]));for(var u in this._trace("Paho.MQTT.Client",t,n,i,o,a),this.host=n,this.port=i,this.path=o,this.uri=t,this.clientId=a,this._wsuri=null,this._localKey=n+":"+i+("/mqtt"!=o?":"+o:"")+":"+a+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,localStorage)0!==u.indexOf("Sent:"+this._localKey)&&0!==u.indexOf("Received:"+this._localKey)||this.restore(u)};v.prototype.host=null,v.prototype.port=null,v.prototype.path=null,v.prototype.uri=null,v.prototype.clientId=null,v.prototype.socket=null,v.prototype.connected=!1,v.prototype.maxMessageIdentifier=65536,v.prototype.connectOptions=null,v.prototype.hostIndex=null,v.prototype.onConnected=null,v.prototype.onConnectionLost=null,v.prototype.onMessageDelivered=null,v.prototype.onMessageArrived=null,v.prototype.traceFunction=null,v.prototype._msg_queue=null,v.prototype._buffered_msg_queue=null,v.prototype._connectTimeout=null,v.prototype.sendPinger=null,v.prototype.receivePinger=null,v.prototype._reconnectInterval=1,v.prototype._reconnecting=!1,v.prototype._reconnectTimeout=null,v.prototype.disconnectedPublishing=!1,v.prototype.disconnectedBufferSize=5e3,v.prototype.receiveBuffer=null,v.prototype._traceBuffer=null,v.prototype._MAX_TRACE_ENTRIES=100,v.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(s(r.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(s(r.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},v.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(s(r.INVALID_STATE,["not connected"]));var n=new u(8);n.topics=[e],void 0!==t.qos?n.requestedQos=[t.qos]:n.requestedQos=[0],t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:s(e)})}),t.timeout&&(n.timeOut=new m(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:r.SUBSCRIBE_TIMEOUT.code,errorMessage:s(r.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},v.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(s(r.INVALID_STATE,["not connected"]));var n=new u(10);n.topics=[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new m(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:r.UNSUBSCRIBE_TIMEOUT.code,errorMessage:s(r.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},v.prototype.send=function(e){if(this._trace("Client.send",e),wireMessage=new u(3),wireMessage.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage)),this._schedule_message(wireMessage);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(s(r.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(s(r.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(wireMessage):(wireMessage.sequence=++this._sequence,this._buffered_msg_queue.push(wireMessage))}},v.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(s(r.INVALID_STATE,["not connecting or connected"]));wireMessage=new u(14),this._notify_msg_sent[wireMessage]=n(this._disconnected,this),this._schedule_message(wireMessage)},v.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},v.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@")},v.prototype.stopTrace=function(){delete this._traceBuffer},v.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=n(this._on_socket_open,this),this.socket.onmessage=n(this._on_socket_message,this),this.socket.onerror=n(this._on_socket_error,this),this.socket.onclose=n(this._on_socket_close,this),this.sendPinger=new E(this,window,this.connectOptions.keepAliveInterval),this.receivePinger=new E(this,window,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new m(this,window,this.connectOptions.timeout,this._disconnected,[r.CONNECT_TIMEOUT.code,s(r.CONNECT_TIMEOUT)])},v.prototype._schedule_message=function(e){this._msg_queue.push(e),this.connected&&this._process_queue()},v.prototype.store=function(e,t){var n={type:t.type,messageIdentifier:t.messageIdentifier,version:1};if(3!==t.type)throw Error(s(r.INVALID_STORED_DATA,[key,n]));t.pubRecReceived&&(n.pubRecReceived=!0),n.payloadMessage={};for(var i="",o=t.payloadMessage.payloadBytes,a=0;a<o.length;a++)o[a]<=15?i=i+"0"+o[a].toString(16):i+=o[a].toString(16);n.payloadMessage.payloadHex=i,n.payloadMessage.qos=t.payloadMessage.qos,n.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(n.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(n.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),n.sequence=t.sequence),localStorage.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(n))},v.prototype.restore=function(e){var t=localStorage.getItem(e),n=JSON.parse(t),i=new u(n.type,n);if(3!==n.type)throw Error(s(r.INVALID_STORED_DATA,[e,t]));for(var o=n.payloadMessage.payloadHex,a=new ArrayBuffer(o.length/2),c=new Uint8Array(a),g=0;o.length>=2;){var l=parseInt(o.substring(0,2),16);o=o.substring(2,o.length),c[g++]=l}var h=new Paho.MQTT.Message(c);h.qos=n.payloadMessage.qos,h.destinationName=n.payloadMessage.destinationName,n.payloadMessage.duplicate&&(h.duplicate=!0),n.payloadMessage.retained&&(h.retained=!0),i.payloadMessage=h,0===e.indexOf("Sent:"+this._localKey)?(i.payloadMessage.duplicate=!0,this._sentMessages[i.messageIdentifier]=i):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[i.messageIdentifier]=i)},v.prototype._process_queue=function(){for(var e=null,t=this._msg_queue.reverse();e=t.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},v.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,3===e.type&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},v.prototype._on_socket_open=function(){var e=new u(1,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},v.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},v.prototype._deframeMessages=function(e){var t=new Uint8Array(e),n=[];if(this.receiveBuffer){var i=new Uint8Array(this.receiveBuffer.length+t.length);i.set(this.receiveBuffer),i.set(t,this.receiveBuffer.length),t=i,delete this.receiveBuffer}try{for(var o=0;o<t.length;){var a=c(t,o),u=a[0];if(o=a[1],null===u)break;n.push(u)}o<t.length&&(this.receiveBuffer=t.subarray(o))}catch(e){var g="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(r.INTERNAL_ERROR.code,s(r.INTERNAL_ERROR,[e.message,g]))}return n},v.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case 2:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var n=this._sentMessages[t];localStorage.removeItem("Sent:"+this._localKey+n.messageIdentifier)}for(var t in this._sentMessages={},this._receivedMessages){var o=this._receivedMessages[t];localStorage.removeItem("Received:"+this._localKey+o.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(r.CONNACK_RETURNCODE.code,s(r.CONNACK_RETURNCODE,[e.returnCode,i[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var a=[];for(var c in this._sentMessages)this._sentMessages.hasOwnProperty(c)&&a.push(this._sentMessages[c]);if(this._buffered_msg_queue.length>0)for(var g=null,l=this._buffered_msg_queue.reverse();g=l.pop();)a.push(g),this.onMessageDelivered&&(this._notify_msg_sent[g]=this.onMessageDelivered(g.payloadMessage));a=a.sort((function(e,t){return e.sequence-t.sequence}));for(var h=0,d=a.length;h<d;h++)if(3==(n=a[h]).type&&n.pubRecReceived){var p=new u(6,{messageIdentifier:n.messageIdentifier});this._schedule_message(p)}else this._schedule_message(n);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var f=!1;this._reconnecting&&(f=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(f,this._wsuri),this._process_queue();break;case 3:this._receivePublish(e);break;case 4:(n=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage));break;case 5:(n=this._sentMessages[e.messageIdentifier])&&(n.pubRecReceived=!0,p=new u(6,{messageIdentifier:e.messageIdentifier}),this.store("Sent:",n),this._schedule_message(p));break;case 6:o=this._receivedMessages[e.messageIdentifier],localStorage.removeItem("Received:"+this._localKey+e.messageIdentifier),o&&(this._receiveMessage(o),delete this._receivedMessages[e.messageIdentifier]);var E=new u(7,{messageIdentifier:e.messageIdentifier});this._schedule_message(E);break;case 7:n=this._sentMessages[e.messageIdentifier],delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage);break;case 9:(n=this._sentMessages[e.messageIdentifier])&&(n.timeOut&&n.timeOut.cancel(),128===e.returnCode[0]?n.onFailure&&n.onFailure(e.returnCode):n.onSuccess&&n.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case 11:(n=this._sentMessages[e.messageIdentifier])&&(n.timeOut&&n.timeOut.cancel(),n.callback&&n.callback(),delete this._sentMessages[e.messageIdentifier]);break;case 13:this.sendPinger.reset();break;default:this._disconnected(r.INVALID_MQTT_MESSAGE_TYPE.code,s(r.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){var m="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(r.INTERNAL_ERROR.code,s(r.INTERNAL_ERROR,[e.message,m]))}},v.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(r.SOCKET_ERROR.code,s(r.SOCKET_ERROR,[e.data]))},v.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(r.SOCKET_CLOSE.code,s(r.SOCKET_CLOSE))},v.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},v.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new u(4,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new u(5,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}},v.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},v.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},v.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},v.prototype._disconnected=function(e,t){if(this._trace("Client._disconnected",e,t),void 0!==e&&this._reconnecting)this._reconnectTimeout=new m(this,window,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=r.OK.code,t=s(r.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==r.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},v.prototype._trace=function(){if(this.traceFunction){for(var e in arguments)void 0!==arguments[e]&&arguments.splice(e,1,JSON.stringify(arguments[e]));var t=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:t})}if(null!==this._traceBuffer){e=0;for(var n=arguments.length;e<n;e++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===e||void 0===arguments[e]?this._traceBuffer.push(arguments[e]):this._traceBuffer.push("  "+JSON.stringify(arguments[e]))}},v.prototype._traceMask=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=r==t?"******":e[r]);return n};var _=function(e,n,i,o){var a;if("string"!=typeof e)throw new Error(s(r.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){o=n;var u=(a=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!u)throw new Error(s(r.INVALID_ARGUMENT,[e,"host"]));e=u[4]||u[2],n=parseInt(u[7]),i=u[8]}else{if(3==arguments.length&&(o=i,i="/mqtt"),"number"!=typeof n||n<0)throw new Error(s(r.INVALID_TYPE,[typeof n,"port"]));if("string"!=typeof i)throw new Error(s(r.INVALID_TYPE,[typeof i,"path"]));var c=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);a="ws://"+(c?"["+e+"]":e)+":"+n+i}for(var g=0,l=0;l<o.length;l++){var h=o.charCodeAt(l);55296<=h&&h<=56319&&l++,g++}if("string"!=typeof o||g>65535)throw new Error(s(r.INVALID_ARGUMENT,[o,"clientId"]));var d=new v(a,e,n,i,o);this._getHost=function(){return e},this._setHost=function(){throw new Error(s(r.UNSUPPORTED_OPERATION))},this._getPort=function(){return n},this._setPort=function(){throw new Error(s(r.UNSUPPORTED_OPERATION))},this._getPath=function(){return i},this._setPath=function(){throw new Error(s(r.UNSUPPORTED_OPERATION))},this._getURI=function(){return a},this._setURI=function(){throw new Error(s(r.UNSUPPORTED_OPERATION))},this._getClientId=function(){return d.clientId},this._setClientId=function(){throw new Error(s(r.UNSUPPORTED_OPERATION))},this._getOnConnected=function(){return d.onConnected},this._setOnConnected=function(e){if("function"!=typeof e)throw new Error(s(r.INVALID_TYPE,[typeof e,"onConnected"]));d.onConnected=e},this._getDisconnectedPublishing=function(){return d.disconnectedPublishing},this._setDisconnectedPublishing=function(e){d.disconnectedPublishing=e},this._getDisconnectedBufferSize=function(){return d.disconnectedBufferSize},this._setDisconnectedBufferSize=function(e){d.disconnectedBufferSize=e},this._getOnConnectionLost=function(){return d.onConnectionLost},this._setOnConnectionLost=function(e){if("function"!=typeof e)throw new Error(s(r.INVALID_TYPE,[typeof e,"onConnectionLost"]));d.onConnectionLost=e},this._getOnMessageDelivered=function(){return d.onMessageDelivered},this._setOnMessageDelivered=function(e){if("function"!=typeof e)throw new Error(s(r.INVALID_TYPE,[typeof e,"onMessageDelivered"]));d.onMessageDelivered=e},this._getOnMessageArrived=function(){return d.onMessageArrived},this._setOnMessageArrived=function(e){if("function"!=typeof e)throw new Error(s(r.INVALID_TYPE,[typeof e,"onMessageArrived"]));d.onMessageArrived=e},this._getTrace=function(){return d.traceFunction},this._setTrace=function(e){if("function"!=typeof e)throw new Error(s(r.INVALID_TYPE,[typeof e,"onTrace"]));d.traceFunction=e},this.connect=function(e){if(t(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(s(r.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(s(r.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof S))throw new Error(s(r.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,void 0===e.willMessage.destinationName)throw new Error(s(r.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(s(r.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(s(r.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var n=!1,o=0;o<e.hosts.length;o++){if("string"!=typeof e.hosts[o])throw new Error(s(r.INVALID_TYPE,[typeof e.hosts[o],"connectOptions.hosts["+o+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[o])){if(0===o)n=!0;else if(!n)throw new Error(s(r.INVALID_ARGUMENT,[e.hosts[o],"connectOptions.hosts["+o+"]"]))}else if(n)throw new Error(s(r.INVALID_ARGUMENT,[e.hosts[o],"connectOptions.hosts["+o+"]"]))}if(n)e.uris=e.hosts;else{if(!e.ports)throw new Error(s(r.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(s(r.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(s(r.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],o=0;o<e.hosts.length;o++){if("number"!=typeof e.ports[o]||e.ports[o]<0)throw new Error(s(r.INVALID_TYPE,[typeof e.ports[o],"connectOptions.ports["+o+"]"]));var u=e.hosts[o],c=e.ports[o],g=-1!==u.indexOf(":");a="ws://"+(g?"["+u+"]":u)+":"+c+i,e.uris.push(a)}}}d.connect(e)},this.subscribe=function(e,n){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(t(n=n||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),n.timeout&&!n.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==n.qos&&0!==n.qos&&1!==n.qos&&2!==n.qos)throw new Error(s(r.INVALID_ARGUMENT,[n.qos,"subscribeOptions.qos"]));d.subscribe(e,n)},this.unsubscribe=function(e,n){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(t(n=n||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),n.timeout&&!n.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");d.unsubscribe(e,n)},this.send=function(e,t,n,i){var o;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof S)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(o=e).destinationName)throw new Error(s(r.INVALID_ARGUMENT,[o.destinationName,"Message.destinationName"]));d.send(o)}else(o=new S(t)).destinationName=e,arguments.length>=3&&(o.qos=n),arguments.length>=4&&(o.retained=i),d.send(o)},this.publish=function(e,t,n,i){var o;if(console.log("Publising message to: ",e),0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof S)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(o=e).destinationName)throw new Error(s(r.INVALID_ARGUMENT,[o.destinationName,"Message.destinationName"]));d.send(o)}else(o=new S(t)).destinationName=e,arguments.length>=3&&(o.qos=n),arguments.length>=4&&(o.retained=i),d.send(o)},this.disconnect=function(){d.disconnect()},this.getTraceLog=function(){return d.getTraceLog()},this.startTrace=function(){d.startTrace()},this.stopTrace=function(){d.stopTrace()},this.isConnected=function(){return d.connected}};_.prototype={get host(){return this._getHost()},set host(e){this._setHost(e)},get port(){return this._getPort()},set port(e){this._setPort(e)},get path(){return this._getPath()},set path(e){this._setPath(e)},get clientId(){return this._getClientId()},set clientId(e){this._setClientId(e)},get onConnected(){return this._getOnConnected()},set onConnected(e){this._setOnConnected(e)},get disconnectedPublishing(){return this._getDisconnectedPublishing()},set disconnectedPublishing(e){this._setDisconnectedPublishing(e)},get disconnectedBufferSize(){return this._getDisconnectedBufferSize()},set disconnectedBufferSize(e){this._setDisconnectedBufferSize(e)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(e){this._setOnConnectionLost(e)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(e){this._setOnMessageDelivered(e)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(e){this._setOnMessageArrived(e)},get trace(){return this._getTrace()},set trace(e){this._setTrace(e)}};var S=function(e){var t,n;if(!("string"==typeof e||e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array))throw s(r.INVALID_ARGUMENT,[e,"newPayload"]);t=e,this._getPayloadString=function(){return"string"==typeof t?t:f(t,0,t.length)},this._getPayloadBytes=function(){if("string"==typeof t){var e=new ArrayBuffer(d(t)),n=new Uint8Array(e);return p(t,n,0),n}return t},this._getDestinationName=function(){return n},this._setDestinationName=function(e){if("string"!=typeof e)throw new Error(s(r.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e};var i=0;this._getQos=function(){return i},this._setQos=function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);i=e};var o=!1;this._getRetained=function(){return o},this._setRetained=function(e){if("boolean"!=typeof e)throw new Error(s(r.INVALID_ARGUMENT,[e,"newRetained"]));o=e};var a=!1;this._getDuplicate=function(){return a},this._setDuplicate=function(e){a=e}};return S.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(e){this._setDestinationName(e)},get topic(){return this._getDestinationName()},set topic(e){this._setDestinationName(e)},get qos(){return this._getQos()},set qos(e){this._setQos(e)},get retained(){return this._getRetained()},set retained(e){this._setRetained(e)},get duplicate(){return this._getDuplicate()},set duplicate(e){this._setDuplicate(e)}},{Client:_,Message:S}}(window);return e},e.exports=t()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n(120),n(272)})();